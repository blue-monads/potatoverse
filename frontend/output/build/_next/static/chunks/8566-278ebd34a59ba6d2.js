"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8566],{1155:(e,t,a)=>{a.d(t,{A:()=>h});var r=a(5155),s=a(2115),o=a(1539),n=a(9946);let l=(0,n.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),c=(0,n.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var i=a(4186),d=a(2706),p=a(4498),u=a(2525),m=a(4616),g=a(6932);let y=[{value:"equal_to",label:"Equal To"},{value:"not_equal_to",label:"Not Equal To"},{value:"greater_than",label:"Greater Than"},{value:"less_than",label:"Less Than"},{value:"greater_than_or_equal",label:"Greater Than Or Equal"},{value:"less_than_or_equal",label:"Less Than Or Equal"},{value:"contains",label:"Contains"},{value:"not_contains",label:"Not Contains"},{value:"before",label:"Before"},{value:"after",label:"After"},{value:"group",label:"Logical Group"}];function x(e){let{rules:t,onRulesChange:a}=e,s=e=>"$logical"===e.variable&&"group"===e.operator,o=e=>"OR"===e.value?"OR":"AND",n=e=>{let r="group-".concat(Date.now()),s={id:"rule-".concat(Date.now(),"-1"),variable:"",operator:"equal_to",value:"",parentId:r};a([...t,{id:r,variable:"$logical",operator:"group",value:e},s])},l=(e,r)=>{a(t.map(t=>t.id===e?{...t,...r}:t))},c=e=>{let r=new Set([e]),s=e=>{t.forEach(t=>{t.parentId===e&&(r.add(t.id),s(t.id))})};s(e),a(t.filter(e=>!r.has(e.id)))},i=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(s(e)){let d,g=o(e),y=(d=e.id,t.filter(e=>e.parentId===d));return(0,r.jsxs)("div",{className:"border border-green-300 rounded-lg p-4 bg-green-50 ".concat(n>0?"ml-6":""),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 text-green-700"}),(0,r.jsxs)("span",{className:"font-medium text-green-900",children:["Logical Group (",g,")"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>(e=>{let a=t.find(t=>t.id===e);a&&s(a)&&l(e,{value:"AND"===o(a)?"OR":"AND"})})(e.id),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:["Switch to ","AND"===g?"OR":"AND"]}),(0,r.jsx)("button",{onClick:()=>c(e.id),className:"text-red-600 hover:text-red-900",children:(0,r.jsx)(u.A,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:y.map(e=>i(e,n+1))}),(0,r.jsxs)("button",{onClick:()=>{var r;return r=e.id,void a([...t,{id:"rule-".concat(Date.now()),variable:"",operator:"equal_to",value:"",parentId:r}])},className:"mt-3 flex items-center gap-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"Add Rule to Group"]})]},e.id)}return(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 border border-gray-200 rounded-lg ".concat(n>0?"ml-6 bg-white":""),children:[(0,r.jsx)("input",{type:"text",value:e.variable,onChange:t=>l(e.id,{variable:t.target.value}),placeholder:"Variable",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("select",{value:e.operator,onChange:t=>l(e.id,{operator:t.target.value}),className:"px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,r.jsx)("input",{type:"text",value:e.value,onChange:t=>l(e.id,{value:t.target.value}),placeholder:"Value",className:"flex-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{onClick:()=>c(e.id),className:"text-red-600 hover:text-red-900",children:(0,r.jsx)(u.A,{className:"w-4 h-4"})})]},e.id)};return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(g.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rules"})]}),(0,r.jsx)("div",{className:"space-y-3 mb-4",children:t.filter(e=>!e.parentId).map(e=>i(e))}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{a([...t,{id:"rule-".concat(Date.now()),variable:"",operator:"equal_to",value:""}])},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"Add Rule"]}),(0,r.jsxs)("button",{onClick:()=>n("AND"),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"Logical Group (AND)"]}),(0,r.jsxs)("button",{onClick:()=>n("OR"),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[(0,r.jsx)(m.A,{className:"w-4 h-4"}),"Logical Group (OR)"]})]})]})}function h(e){let{onSave:t,onBack:a,initialData:n}=e,[p,u]=(0,s.useState)((null==n?void 0:n.event_key)||""),[m,g]=(0,s.useState)([]),[y,h]=(0,s.useState)({type:"webhook",endpoint:"",code:"",smtpHost:"",smtpPort:"587",smtpUser:"",smtpPassword:"",smtpFrom:"",smtpTo:"",targetSpaceId:0}),[f,v]=(0,s.useState)((null==n?void 0:n.disabled)||!1),[b,_]=(0,s.useState)((null==n?void 0:n.delay_start)||0),[N,j]=(0,s.useState)((null==n?void 0:n.retry_delay)||0),[w,k]=(0,s.useState)((null==n?void 0:n.max_retries)||0),[A,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(n){try{let e=n.rules?JSON.parse(n.rules):[];Array.isArray(e)&&e.length>0&&e[0].id&&g(e.map(e=>({id:e.id||"rule-".concat(Date.now()),variable:e.variable||"",operator:e.operator||"",value:e.value||"",parentId:e.parent_id||e.parentId||void 0})))}catch(e){console.error("Failed to parse rules:",e)}let e={type:n.target_type||"webhook",endpoint:n.target_endpoint||"",code:n.target_code||"",smtpHost:"",smtpPort:"587",smtpUser:"",smtpPassword:"",smtpFrom:"",smtpTo:"",targetSpaceId:0};if("email"===n.target_type&&n.target_options)try{let t="string"==typeof n.target_options?JSON.parse(n.target_options):n.target_options;e.smtpHost=t.smtp_host||"",e.smtpPort=t.smtp_port||"587",e.smtpUser=t.smtp_user||"",e.smtpPassword=t.smtp_password||"",e.smtpFrom=t.smtp_from||"",e.smtpTo=t.smtp_to||""}catch(e){console.error("Failed to parse target_options:",e)}"space_method"===n.target_type&&(e.targetSpaceId=n.target_space_id||0,e.endpoint=n.target_endpoint||""),h(e),_(n.delay_start||0),j(n.retry_delay||0),k(n.max_retries||0)}},[n]);let S=async()=>{if(!p.trim())return void alert("Event Key is required");if(!y.type)return void alert("Target type is required");if("webhook"===y.type&&!y.endpoint.trim())return void alert("Endpoint is required for webhook");if("space_method"===y.type&&!y.targetSpaceId)return void alert("Space is required for space method");if("space_method"===y.type&&!y.endpoint.trim())return void alert("Event name is required for space method");if("script"===y.type&&!y.code.trim())return void alert("Code is required for script");if("email"===y.type){if(!y.smtpHost.trim())return void alert("SMTP Host is required");if(!y.smtpUser.trim())return void alert("SMTP User is required");if(!y.smtpFrom.trim())return void alert("SMTP From is required");if(!y.smtpTo.trim())return void alert("SMTP To is required")}C(!0);try{let e={};"email"===y.type&&(e={smtp_host:y.smtpHost,smtp_port:y.smtpPort||"587",smtp_user:y.smtpUser,smtp_password:y.smtpPassword,smtp_from:y.smtpFrom,smtp_to:y.smtpTo});let a={event_key:p,target_type:y.type,target_endpoint:y.endpoint,target_code:"script"===y.type?y.code:"",target_options:e,rules:JSON.stringify(m),transform:"{}",delay_start:b,retry_delay:N,max_retries:w,disabled:f,target_space_id:y.targetSpaceId};await t(a)}catch(e){}finally{C(!1)}},T=e=>{h({...y,...e})};return(0,r.jsx)(d.A,{Icon:o.A,name:"Event Subscription",description:n?"Edit event subscription":"Create new event subscription",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-8 w-full space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(l,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Event Name"})]}),(0,r.jsx)("input",{type:"text",value:p,onChange:e=>u(e.target.value),placeholder:"e.g., Record edited",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),p&&(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:p})]}),(0,r.jsx)(x,{rules:m,onRulesChange:g}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(c,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Target"})]}),(0,r.jsxs)("div",{className:"rounded-lg p-4",children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"When rule matches"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Target Type"}),(0,r.jsx)("select",{value:y.type,onChange:e=>T({type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"email",label:"Email"},{value:"webhook",label:"Webhook"},{value:"script",label:"Script"},{value:"log",label:"Log"},{value:"space_method",label:"Space Method"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"webhook"===y.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endpoint URL"}),(0,r.jsx)("input",{type:"text",value:y.endpoint,onChange:e=>T({endpoint:e.target.value}),placeholder:"https://webhook.site/...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),"script"===y.type&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Script Code"}),(0,r.jsx)("textarea",{value:y.code,onChange:e=>T({code:e.target.value}),placeholder:"// Your script code here...",rows:10,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm"})]}),"email"===y.type&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Host"}),(0,r.jsx)("input",{type:"text",value:y.smtpHost,onChange:e=>T({smtpHost:e.target.value}),placeholder:"smtp.gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Port"}),(0,r.jsx)("input",{type:"text",value:y.smtpPort,onChange:e=>T({smtpPort:e.target.value}),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP User"}),(0,r.jsx)("input",{type:"text",value:y.smtpUser,onChange:e=>T({smtpUser:e.target.value}),placeholder:"your-email@gmail.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SMTP Password"}),(0,r.jsx)("input",{type:"password",value:y.smtpPassword,onChange:e=>T({smtpPassword:e.target.value}),placeholder:"your-password",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email"}),(0,r.jsx)("input",{type:"email",value:y.smtpFrom,onChange:e=>T({smtpFrom:e.target.value}),placeholder:"sender@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Email"}),(0,r.jsx)("input",{type:"email",value:y.smtpTo,onChange:e=>T({smtpTo:e.target.value}),placeholder:"recipient@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),"space_method"===y.type&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Space"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"number",placeholder:"space_id",value:y.targetSpaceId,onChange:e=>T({targetSpaceId:parseInt(e.target.value)}),className:"w-11/12 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("button",{className:"w-1/12 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 hover:bg-gray-400 text-gray-00 hover:text-white",children:"Pick"})]}),(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Name"}),(0,r.jsx)("input",{type:"text",value:y.endpoint,onChange:e=>T({endpoint:e.target.value}),placeholder:"notify_x_changed",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,r.jsx)(i.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Retry & Delay Settings"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delay Start (seconds)"}),(0,r.jsx)("input",{type:"number",value:b,onChange:e=>_(parseInt(e.target.value)||0),min:"0",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Delay before processing starts"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retry Delay (seconds)"}),(0,r.jsx)("input",{type:"number",value:N,onChange:e=>j(parseInt(e.target.value)||0),min:"0",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Delay between retry attempts"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Retries"}),(0,r.jsx)("input",{type:"number",value:w,onChange:e=>k(parseInt(e.target.value)||0),min:"0",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Maximum number of retry attempts"})]})]})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!f,onChange:e=>v(!e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Back"}),(0,r.jsx)("button",{onClick:S,disabled:A,className:"px-6 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 disabled:opacity-50",children:A?"Saving...":"Save"})]})]})})}},1539:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},1886:(e,t,a)=>{a.d(t,{$V:()=>T,$c:()=>p,AC:()=>S,B9:()=>H,BA:()=>f,Cs:()=>ee,De:()=>D,Ed:()=>w,H1:()=>ed,H4:()=>em,IF:()=>b,K4:()=>h,Kh:()=>ep,Lv:()=>Q,MA:()=>O,Nv:()=>eo,Om:()=>er,Oz:()=>d,P6:()=>ei,Pj:()=>W,QD:()=>u,QT:()=>X,Qf:()=>L,Qk:()=>es,Ql:()=>y,R5:()=>U,Sx:()=>G,T:()=>ea,TT:()=>$,TY:()=>et,Tv:()=>E,U8:()=>F,UP:()=>eb,VG:()=>M,Y3:()=>n,YT:()=>R,ZN:()=>Y,_m:()=>x,ct:()=>V,e0:()=>z,eK:()=>K,eq:()=>m,fB:()=>A,gw:()=>ef,iD:()=>l,iJ:()=>v,iQ:()=>_,iY:()=>B,ir:()=>g,iu:()=>j,j3:()=>N,lB:()=>J,lo:()=>c,mm:()=>eh,no:()=>ey,q0:()=>Z,qR:()=>ev,qf:()=>en,rf:()=>eu,s2:()=>C,sI:()=>ex,si:()=>e_,tF:()=>k,to:()=>el,u1:()=>I,uP:()=>P,wz:()=>i,yj:()=>eg,yn:()=>q,z6:()=>ec});var r=a(3464),s=a(3999);let o=r.A.create({baseURL:"/zz/api"}),n=()=>{let e=(0,s.MH)(),t={"Content-Type":"application/json","X-Clacks-Overhead":"Aaron Swartz"};(null==e?void 0:e.accessToken)&&(t.Authorization="TokenV1 ".concat(e.accessToken)),o=r.A.create({baseURL:"/zz/api",headers:t})},l=async(e,t)=>o.post("/core/auth/login",{username:e,password:t}),c=async()=>o.get("/core/user"),i=async e=>o.get("/core/user/".concat(e)),d=async()=>o.get("/core/user/invites"),p=async e=>o.post("/core/user/invites",e),u=async e=>o.delete("/core/user/invites/".concat(e)),m=async e=>o.post("/core/user/invites/".concat(e,"/resend")),g=async e=>o.get("/core/auth/invite/".concat(e)),y=async(e,t)=>o.post("/core/auth/invite/".concat(e),t),x=async e=>o.post("/core/user/create",e),h=async()=>o.get("/core/user/groups"),f=async e=>o.post("/core/user/groups",e),v=async(e,t)=>o.put("/core/user/groups/".concat(e),t),b=async e=>o.delete("/core/user/groups/".concat(e)),_=async e=>o.get("/core/self/portalData/".concat(e)),N=async()=>o.get("/core/self/info"),j=async e=>o.put("/core/self/bio",{bio:e}),w=async e=>o.post("/core/package/install",{url:e}),k=async e=>o.post("/core/package/install/zip",e,{headers:{"Content-Type":"application/zip"}}),A=async(e,t)=>o.post("/core/package/install/embed",{name:e,repo_slug:t}),C=async e=>o.delete("/core/package/".concat(e)),S=async e=>o.post("/core/package/".concat(e,"/dev-token")),T=async e=>{let t=e?"?repo=".concat(encodeURIComponent(e)):"";return o.get("/core/package/list".concat(t))},P=async()=>o.get("/core/repo/list"),q=async()=>o.get("/core/space/installed"),M=async e=>o.get("/core/package/".concat(e,"/info")),D=async(e,t)=>{let a=encodeURIComponent(t);return o.get("/core/engine/space_info/".concat(e,"?host_name=").concat(a.toString()))},R=async(e,t)=>{let a=window.location.hostname;return o.get("/core/engine/derivehost/".concat(e,"?host_name=").concat(a,"&space_id=").concat(t))},I=async(e,t)=>o.post("/core/space/authorize/".concat(e),{space_id:t}),O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.get("/core/vpackage/".concat(e,"/files"),{params:{path:t}})},E=async(e,t)=>o.get("/core/vpackage/".concat(e,"/files/").concat(t,"/download"),{responseType:"blob"}),z=async(e,t)=>o.delete("/core/vpackage/".concat(e,"/files/").concat(t)),F=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new FormData;return r.append("file",t),r.append("path",a),o.post("/core/vpackage/".concat(e,"/files/upload"),r,{headers:{"Content-Type":"multipart/form-data"}})},H=async function(e,t,a,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await z(e,t);let n=new File([new Blob([a],{type:"text/plain"})],r,{type:"text/plain"}),l=new FormData;return l.append("file",n),l.append("path",s),o.post("/core/vpackage/".concat(e,"/files/upload"),l,{headers:{"Content-Type":"multipart/form-data"}})},L=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return o.get("/core/space/".concat(e,"/kv"),{params:{offset:t,limit:a}})},U=async(e,t)=>o.get("/core/space/".concat(e,"/kv/").concat(t)),B=async(e,t)=>o.post("/core/space/".concat(e,"/kv"),t),J=async(e,t,a)=>o.put("/core/space/".concat(e,"/kv/").concat(t),a),Q=async(e,t)=>o.delete("/core/space/".concat(e,"/kv/").concat(t)),V=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.get("/core/space/".concat(e,"/files"),{params:{path:t}})},Y=async(e,t)=>o.get("/core/space/".concat(e,"/files/").concat(t,"/download"),{responseType:"blob"}),G=async(e,t)=>o.delete("/core/space/".concat(e,"/files/").concat(t)),K=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=new FormData;return r.append("file",t),r.append("path",a),o.post("/core/space/".concat(e,"/files/upload"),r,{headers:{"Content-Type":"multipart/form-data"}})},$=async function(e,t,a,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await G(e,t);let n=new File([new Blob([a],{type:"text/plain"})],r,{type:"text/plain"}),l=new FormData;return l.append("file",n),l.append("path",s),o.post("/core/space/".concat(e,"/files/upload"),l,{headers:{"Content-Type":"multipart/form-data"}})},W=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.post("/core/space/".concat(e,"/files/folder"),{name:t,path:a})},Z=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;return o.post("/core/space/".concat(e,"/files/presigned"),{file_name:t,path:a,expiry:r})},X=async(e,t)=>{let a=new FormData;return a.append("file",t),r.A.post("/zz/file/upload-presigned?presigned-key=".concat(e),a,{headers:{"Content-Type":"multipart/form-data"}})},ee=async()=>o.get("/core/capability/types"),et=async(e,t,a)=>o.get("/core/space/".concat(e,"/capabilities"),{params:{...void 0!==t&&{space_id:t},...a&&{capability_type:a}}}),ea=async(e,t)=>o.post("/core/space/".concat(e,"/capabilities"),t),er=async(e,t,a)=>o.put("/core/space/".concat(e,"/capabilities/").concat(t),a),es=async(e,t)=>o.delete("/core/space/".concat(e,"/capabilities/").concat(t)),eo=async(e,t,a,r)=>o.get("/core/space/".concat(e,"/users"),{params:{...void 0!==t&&{space_id:t},...void 0!==a&&{user_id:a},...r&&{scope:r}}}),en=async(e,t)=>o.post("/core/space/".concat(e,"/users"),t),el=async(e,t,a)=>o.put("/core/space/".concat(e,"/users/").concat(t),a),ec=async(e,t)=>o.delete("/core/space/".concat(e,"/users/").concat(t)),ei=async(e,t,a)=>o.get("/core/space/".concat(e,"/events"),{params:{...void 0!==t&&{space_id:t},...a&&{event_key:a}}}),ed=async(e,t)=>o.get("/core/space/".concat(e,"/events/").concat(t)),ep=async(e,t)=>{let a={event_key:t.event_key,target_type:t.target_type,...void 0!==t.space_id&&{space_id:t.space_id},...t.target_endpoint&&{target_endpoint:t.target_endpoint},...t.target_options&&{target_options:"string"==typeof t.target_options?t.target_options:JSON.stringify(t.target_options)},...t.target_code&&{target_code:t.target_code},...void 0!==t.target_space_id&&{target_space_id:t.target_space_id},...t.rules&&{rules:"string"==typeof t.rules?t.rules:JSON.stringify(t.rules)},...t.transform&&{transform:"string"==typeof t.transform?t.transform:JSON.stringify(t.transform)},...void 0!==t.delay_start&&{delay_start:t.delay_start},...void 0!==t.retry_delay&&{retry_delay:t.retry_delay},...void 0!==t.max_retries&&{max_retries:t.max_retries},...t.extrameta&&{extrameta:"string"==typeof t.extrameta?t.extrameta:JSON.stringify(t.extrameta)},...void 0!==t.disabled&&{disabled:t.disabled}};return o.post("/core/space/".concat(e,"/events"),a)},eu=async(e,t,a)=>{let r={};return void 0!==a.event_key&&(r.event_key=a.event_key),void 0!==a.target_type&&(r.target_type=a.target_type),void 0!==a.space_id&&(r.space_id=a.space_id),void 0!==a.target_endpoint&&(r.target_endpoint=a.target_endpoint),void 0!==a.target_options&&(r.target_options="string"==typeof a.target_options?a.target_options:JSON.stringify(a.target_options)),void 0!==a.target_code&&(r.target_code=a.target_code),void 0!==a.rules&&(r.rules="string"==typeof a.rules?a.rules:JSON.stringify(a.rules)),void 0!==a.transform&&(r.transform="string"==typeof a.transform?a.transform:JSON.stringify(a.transform)),void 0!==a.delay_start&&(r.delay_start=a.delay_start),void 0!==a.retry_delay&&(r.retry_delay=a.retry_delay),void 0!==a.max_retries&&(r.max_retries=a.max_retries),void 0!==a.extrameta&&(r.extrameta="string"==typeof a.extrameta?a.extrameta:JSON.stringify(a.extrameta)),void 0!==a.disabled&&(r.disabled=a.disabled),o.put("/core/space/".concat(e,"/events/").concat(t),r)},em=async(e,t)=>o.delete("/core/space/".concat(e,"/events/").concat(t)),eg=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a={limit:t};return null!=e&&(a.after_id=e),o.get("/core/user/messages",{params:a})},ey=async()=>o.get("/core/user/messages/new"),ex=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return o.get("/core/user/messages/history",{params:{limit:e}})},eh=async e=>o.delete("/core/user/messages/".concat(e)),ef=async e=>o.post("/core/user/messages/".concat(e,"/read")),ev=async()=>o.post("/core/user/messages/read-all"),eb=async()=>o.get("/core/docs/docs_index.json"),e_=async e=>o.get("/core/docs/".concat(e))},2525:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2706:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(5155);let s=e=>(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"h4",children:e.name}),(0,r.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},3999:(e,t,a)=>{a.d(t,{MH:()=>o,NC:()=>s,a1:()=>n});let r="_tnx_login_info_",s=(e,t)=>{localStorage.setItem(r,JSON.stringify({accessToken:e,userInfo:t}))},o=()=>{let e=localStorage.getItem(r);return e?JSON.parse(e):null},n=()=>{localStorage.removeItem(r)}},4186:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4498:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},4616:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4678:(e,t,a)=>{a.d(t,{$V:()=>s.$V,AC:()=>s.AC,B9:()=>s.B9,Cs:()=>s.Cs,De:()=>s.De,Ed:()=>s.Ed,H1:()=>s.H1,H4:()=>s.H4,K4:()=>s.K4,Kh:()=>s.Kh,Lv:()=>s.Lv,MA:()=>s.MA,MH:()=>r.MH,NC:()=>r.NC,Nv:()=>s.Nv,Om:()=>s.Om,P6:()=>s.P6,Pj:()=>s.Pj,QT:()=>s.QT,Qf:()=>s.Qf,Qk:()=>s.Qk,R5:()=>s.R5,Sx:()=>s.Sx,T:()=>s.T,TT:()=>s.TT,TY:()=>s.TY,Tv:()=>s.Tv,U8:()=>s.U8,VG:()=>s.VG,Y3:()=>s.Y3,ZN:()=>s.ZN,_m:()=>s._m,a1:()=>r.a1,ct:()=>s.ct,e0:()=>s.e0,eK:()=>s.eK,fB:()=>s.fB,iY:()=>s.iY,lB:()=>s.lB,lo:()=>s.lo,q0:()=>s.q0,qf:()=>s.qf,rf:()=>s.rf,s2:()=>s.s2,tF:()=>s.tF,to:()=>s.to,u1:()=>s.u1,uP:()=>s.uP,yn:()=>s.yn,z6:()=>s.z6});var r=a(3999),s=a(1886)},5695:(e,t,a)=>{var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6932:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},9946:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:i="",children:d,iconNode:p,...u}=e;return(0,r.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:a,strokeWidth:c?24*Number(l)/Number(s):l,className:o("lucide",i),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...p.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:c,...i}=a;return(0,r.createElement)(l,{ref:n,iconNode:t,className:o("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...i})});return a.displayName=s(e),a}}}]);