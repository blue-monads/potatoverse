(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3604],{4241:(e,t,a)=>{Promise.resolve().then(a.bind(a,5171))},5171:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(5155);a(2115);var n=a(5695),r=a(171),l=a(4678),i=a(7071);function d(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),a=t.get("install_id"),d=t.get("space_id"),c=t.get("event_id");if(!a||!c)return(0,s.jsx)("div",{children:"Install ID or Event ID not provided"});let o=(0,i.A)({loader:()=>(0,l.H1)(parseInt(a),parseInt(c)),ready:!0,dependencies:[a,c]}),u=async t=>{try{await (0,l.rf)(parseInt(a),parseInt(c),t);let s=new URLSearchParams;s.set("install_id",a),d&&s.set("space_id",d),e.push("/portal/admin/spaces/tools/events?".concat(s.toString()))}catch(e){var s,n;throw console.error("Failed to update event subscription:",e),alert("Failed to update event subscription: "+((null==e||null==(n=e.response)||null==(s=n.data)?void 0:s.error)||(null==e?void 0:e.message))),e}};return o.loading?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading subscription..."})]})}):o.data?(0,s.jsx)(r.A,{onSave:u,onBack:()=>{let t=new URLSearchParams;t.set("install_id",a),d&&t.set("space_id",d),e.push("/portal/admin/spaces/tools/events?".concat(t.toString()))},initialData:o.data}):(0,s.jsx)("div",{children:"Subscription not found"})}},7071:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(2115);let n=e=>{let[t,a]=(0,s.useState)(null),[n,r]=(0,s.useState)(!1),[l,i]=(0,s.useState)(null),d=async()=>{if(e.ready){r(!0),i(null);try{let t=await e.loader();a(t.data)}catch(e){i(e.message||"An error occurred")}finally{r(!1)}}};return(0,s.useEffect)(()=>{d()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:t,loading:n,error:l,reload:d}}}},e=>{e.O(0,[3464,7806,8441,5964,7358],()=>e(e.s=4241)),_N_E=e.O()}]);