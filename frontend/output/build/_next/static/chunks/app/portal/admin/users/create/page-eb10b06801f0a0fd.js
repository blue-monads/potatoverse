(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[263],{1007:(e,r,a)=>{"use strict";a.d(r,{A:()=>t});let t=(0,a(9946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1886:(e,r,a)=>{"use strict";a.d(r,{$V:()=>U,$c:()=>u,BA:()=>b,De:()=>z,Ed:()=>N,IF:()=>v,K4:()=>y,Lv:()=>R,MA:()=>_,Oz:()=>i,Pj:()=>O,QD:()=>m,QT:()=>Y,Qf:()=>M,Ql:()=>x,Sx:()=>I,Tv:()=>E,U8:()=>B,Y3:()=>l,ZN:()=>Q,_m:()=>h,ct:()=>q,e0:()=>L,eK:()=>K,eq:()=>g,fB:()=>A,iD:()=>o,iJ:()=>f,iQ:()=>k,iY:()=>P,ir:()=>p,iu:()=>w,j3:()=>j,lB:()=>D,lo:()=>c,q0:()=>H,s2:()=>S,tF:()=>C,u1:()=>F,wz:()=>d,yn:()=>T});var t=a(3464),s=a(3999);let n=t.A.create({baseURL:"/zz/api"}),l=()=>{let e=(0,s.MH)(),r={"Content-Type":"application/json","X-Overhead":"Aaron Swartz"};(null==e?void 0:e.accessToken)&&(r.Authorization="TokenV1 ".concat(e.accessToken)),n=t.A.create({baseURL:"/zz/api",headers:r})},o=async(e,r)=>n.post("/core/auth/login",{username:e,password:r}),c=async()=>n.get("/core/user"),d=async e=>n.get("/core/user/".concat(e)),i=async()=>n.get("/core/user/invites"),u=async e=>n.post("/core/user/invites",e),m=async e=>n.delete("/core/user/invites/".concat(e)),g=async e=>n.post("/core/user/invites/".concat(e,"/resend")),p=async e=>n.get("/core/auth/invite/".concat(e)),x=async(e,r)=>n.post("/core/auth/invite/".concat(e),r),h=async e=>n.post("/core/user/create",e),y=async()=>n.get("/core/user/groups"),b=async e=>n.post("/core/user/groups",e),f=async(e,r)=>n.put("/core/user/groups/".concat(e),r),v=async e=>n.delete("/core/user/groups/".concat(e)),k=async e=>n.get("/core/self/portalData/".concat(e)),j=async()=>n.get("/core/self/info"),w=async e=>n.put("/core/self/bio",{bio:e}),N=async e=>n.post("/core/package/install",{url:e}),C=async e=>n.post("/core/package/install/zip",e,{headers:{"Content-Type":"application/zip"}}),A=async e=>n.post("/core/package/install/embed",{name:e}),S=async e=>n.delete("/core/package/".concat(e)),U=async()=>n.get("/core/package/list"),T=async()=>n.get("/core/space/installed"),z=async e=>n.get("/core/engine/space_info/".concat(e)),F=async(e,r)=>n.post("/core/space/authorize/".concat(e),{space_id:r}),_=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.get("/core/package/".concat(e,"/files"),{params:{path:r}})},E=async(e,r)=>n.get("/core/package/".concat(e,"/files/").concat(r,"/download"),{responseType:"blob"}),L=async(e,r)=>n.delete("/core/package/".concat(e,"/files/").concat(r)),B=async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=new FormData;return t.append("file",r),t.append("path",a),n.post("/core/package/".concat(e,"/files/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})},M=async e=>n.get("/core/space/".concat(e,"/kv")),P=async(e,r)=>n.post("/core/space/".concat(e,"/kv"),r),D=async(e,r,a)=>n.put("/core/space/".concat(e,"/kv/").concat(r),a),R=async(e,r)=>n.delete("/core/space/".concat(e,"/kv/").concat(r)),q=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return n.get("/core/space/".concat(e,"/files"),{params:{path:r}})},Q=async(e,r)=>n.get("/core/space/".concat(e,"/files/").concat(r,"/download"),{responseType:"blob"}),I=async(e,r)=>n.delete("/core/space/".concat(e,"/files/").concat(r)),K=async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=new FormData;return t.append("file",r),t.append("path",a),n.post("/core/space/".concat(e,"/files/upload"),t,{headers:{"Content-Type":"multipart/form-data"}})},O=async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n.post("/core/space/".concat(e,"/files/folder"),{name:r,path:a})},H=async function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",t=arguments.length>3?arguments[3]:void 0;return n.post("/core/space/".concat(e,"/files/presigned"),{file_name:r,path:a,expiry:t})},Y=async(e,r)=>{let a=new FormData;return a.append("file",r),t.A.post("/zz/file/upload-presigned?presigned-key=".concat(e),a,{headers:{"Content-Type":"multipart/form-data"}})}},2706:(e,r,a)=>{"use strict";a.d(r,{A:()=>s});var t=a(5155);let s=e=>(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"h4",children:e.name}),(0,t.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},3999:(e,r,a)=>{"use strict";a.d(r,{MH:()=>n,NC:()=>s,a1:()=>l});let t="_tnx_login_info_",s=(e,r)=>{localStorage.setItem(t,JSON.stringify({accessToken:e,userInfo:r}))},n=()=>{let e=localStorage.getItem(t);return e?JSON.parse(e):null},l=()=>{localStorage.removeItem(t)}},4320:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var t=a(5155),s=a(2115),n=a(5695),l=a(1007),o=a(2706),c=a(4678);function d(){let e=(0,n.useRouter)(),[r,a]=(0,s.useState)({name:"",email:"",username:"",utype:"user",ugroup:""}),[d,i]=(0,s.useState)(!1),[u,m]=(0,s.useState)(""),[g,p]=(0,s.useState)(null),[x,h]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,c.K4)();h(e.data),e.data.length>0&&!r.ugroup&&a(r=>({...r,ugroup:e.data[0].name}))}catch(e){console.error("Failed to load user groups:",e),m("Failed to load user groups")}finally{b(!1)}})()},[]);let f=async e=>{e.preventDefault(),i(!0),m("");try{let e=await (0,c._m)(r);p(e.data)}catch(e){var a,t;m((null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.message)||(null==e?void 0:e.message)||"An error occurred")}finally{i(!1)}},v=(e,r)=>{a(a=>({...a,[e]:r}))},k=()=>{e.push("/portal/admin/users")};return(0,t.jsx)(o.A,{Icon:l.A,name:"Users",description:"Manage your users, roles, and permissions.",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto my-20",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/20 mb-4",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"User Created Successfully!"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"The user has been created and can now log in with the generated password."})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"User Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Name"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:g.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:g.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Username"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:g.username})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"User Type"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1 capitalize",children:g.utype})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"User Group"}),(0,t.jsx)("p",{className:"text-sm text-gray-900 dark:text-white mt-1 capitalize",children:g.ugroup})]})]}),(0,t.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Generated Password"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,t.jsx)("p",{className:"text-sm font-mono text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded border flex-1",children:g.password}),(0,t.jsx)("button",{type:"button",onClick:()=>navigator.clipboard.writeText(g.password),className:"px-3 py-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium border border-blue-200 dark:border-blue-700 rounded hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Copy"})]}),(0,t.jsxs)("p",{className:"text-xs text-red-600 dark:text-red-400 mt-2 flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Please save this password securely. It won't be shown again."]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center mt-8",children:[(0,t.jsx)("button",{onClick:()=>{p(null),a({name:"",email:"",username:"",utype:"user",ugroup:x.length>0?x[0].name:""}),m("")},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Create Another User"}),(0,t.jsx)("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Back to Users"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Create New User"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Create a new user account directly. A random password will be generated."})]}),(0,t.jsxs)("form",{onSubmit:f,className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Full Name *"}),(0,t.jsx)("input",{type:"text",id:"name",value:r.name,onChange:e=>v("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter full name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",id:"email",value:r.email,onChange:e=>v("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter email address",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),(0,t.jsx)("input",{type:"text",id:"username",value:r.username,onChange:e=>v("username",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter username",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"utype",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User Type *"}),(0,t.jsx)("select",{id:"utype",value:r.utype,onChange:e=>v("utype",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[{value:"user",label:"User"},{value:"bot",label:"Bot"}].map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"ugroup",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"User Group *"}),(0,t.jsx)("select",{id:"ugroup",value:r.ugroup,onChange:e=>v("ugroup",e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,disabled:y,children:y?(0,t.jsx)("option",{value:"",children:"Loading groups..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("option",{value:"",children:"Select a user group"}),x.map(e=>(0,t.jsxs)("option",{value:e.name,children:[e.name," ",e.info&&"- ".concat(e.info)]},e.name))]})})]})]}),u&&(0,t.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,t.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:u})}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("button",{type:"button",onClick:k,className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors",disabled:d,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-50",disabled:d,children:d?"Creating...":"Create User"})]})]})]})})})}},4678:(e,r,a)=>{"use strict";a.d(r,{$V:()=>s.$V,De:()=>s.De,Ed:()=>s.Ed,K4:()=>s.K4,Lv:()=>s.Lv,MA:()=>s.MA,MH:()=>t.MH,NC:()=>t.NC,Pj:()=>s.Pj,QT:()=>s.QT,Qf:()=>s.Qf,Sx:()=>s.Sx,Tv:()=>s.Tv,U8:()=>s.U8,Y3:()=>s.Y3,ZN:()=>s.ZN,_m:()=>s._m,a1:()=>t.a1,ct:()=>s.ct,e0:()=>s.e0,eK:()=>s.eK,fB:()=>s.fB,iY:()=>s.iY,lB:()=>s.lB,lo:()=>s.lo,q0:()=>s.q0,s2:()=>s.s2,tF:()=>s.tF,u1:()=>s.u1,yn:()=>s.yn});var t=a(3999),s=a(1886)},5695:(e,r,a)=>{"use strict";var t=a(8999);a.o(t,"usePathname")&&a.d(r,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(r,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(r,{useSearchParams:function(){return t.useSearchParams}})},8804:(e,r,a)=>{Promise.resolve().then(a.bind(a,4320))},9946:(e,r,a)=>{"use strict";a.d(r,{A:()=>c});var t=a(2115);let s=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},n=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,t.forwardRef)((e,r)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:d="",children:i,iconNode:u,...m}=e;return(0,t.createElement)("svg",{ref:r,...l,width:s,height:s,stroke:a,strokeWidth:c?24*Number(o)/Number(s):o,className:n("lucide",d),...!i&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(i)?i:[i]])}),c=(e,r)=>{let a=(0,t.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,t.createElement)(o,{ref:l,iconNode:r,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return a.displayName=s(e),a}}},e=>{e.O(0,[464,441,964,977],()=>e(e.s=8804)),_N_E=e.O()}]);