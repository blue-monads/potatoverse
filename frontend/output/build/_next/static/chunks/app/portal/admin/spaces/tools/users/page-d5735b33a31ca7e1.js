(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3734],{1539:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},2525:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2569:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var t=a(5155),r=a(7924),l=a(1539);let i=e=>(0,t.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 ".concat(e.className),children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(r.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:e.placeholder||"Search spaces...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.searchText,onChange:s=>e.setSearchText(s.target.value)}),(0,t.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",onClick:e.onSearchButtonClick,children:(0,t.jsx)(l.A,{className:"w-5 h-5 text-gray-400"})})]})})})},2706:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(5155);let r=e=>(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"h4",children:e.name}),(0,t.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},2780:(e,s,a)=>{"use strict";a.d(s,{A:()=>l,M:()=>r});var t=a(5155);let r=e=>(0,t.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-base preset-filled",children:e.name||"Add"}),l=r},3717:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4498:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},5695:(e,s,a)=>{"use strict";var t=a(8999);a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}}),a.o(t,"useSearchParams")&&a.d(s,{useSearchParams:function(){return t.useSearchParams}})},6932:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},6933:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(5155),r=a(2115),l=a(7580),i=a(6932),c=a(7108),n=a(4498),d=a(3717),o=a(2525),u=a(5695),p=a(2706),x=a(2569),m=a(2780),h=a(993),g=a(4678),y=a(7071);function v(){let e=(0,u.useSearchParams)(),s=e.get("install_id"),a=e.get("space_id");return s?(0,t.jsx)(f,{installId:parseInt(s),spaceId:a?parseInt(a):void 0}):(0,t.jsx)("div",{children:"Install ID not provided"})}let f=e=>{var s;let{installId:a,spaceId:u}=e,[v,f]=(0,r.useState)(""),[N,w]=(0,r.useState)("all"),[k,A]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1);(0,h.ii)();let _=(0,y.A)({loader:()=>{let e={};return"package"===N?e.space_id=0:"space"===N&&u&&(e.space_id=u),(0,g.Nv)(a,e.space_id)},ready:!0,dependencies:[N,a,u]}),M=(0,y.A)({loader:()=>(0,g.lo)(),ready:!0}),L=(null==(s=_.data)?void 0:s.filter(e=>{var s;let a=null==(s=M.data)?void 0:s.find(s=>s.id===e.user_id);return""===v||(null==a?void 0:a.name)&&a.name.toLowerCase().includes(v.toLowerCase())||(null==a?void 0:a.email)&&a.email.toLowerCase().includes(v.toLowerCase())||e.scope.toLowerCase().includes(v.toLowerCase())||String(e.user_id).includes(v)||String(e.space_id).includes(v)}))||[],P=async e=>{try{await (0,g.qf)(a,e),_.reload(),C(!1)}catch(e){var s,t;console.error("Failed to create space user:",e),alert("Failed to create space user: "+((null==e||null==(t=e.response)||null==(s=t.data)?void 0:s.error)||(null==e?void 0:e.message)))}},I=async(e,s)=>{try{await (0,g.to)(a,e,s),_.reload(),A(null)}catch(e){var t,r;console.error("Failed to update space user:",e),alert("Failed to update space user: "+((null==e||null==(r=e.response)||null==(t=r.data)?void 0:t.error)||(null==e?void 0:e.message)))}},z=async e=>{try{await (0,g.z6)(a,e),_.reload()}catch(e){var s,t;console.error("Failed to delete space user:",e),alert("Failed to delete space user: "+((null==e||null==(t=e.response)||null==(s=t.data)?void 0:s.error)||(null==e?void 0:e.message)))}};return(0,t.jsxs)(p.A,{Icon:l.A,name:"Space Users",description:"Manage users assigned to this package or space",rightContent:(0,t.jsx)(m.M,{name:"+ Add User",onClick:()=>C(!0)}),children:[(0,t.jsx)(x.A,{searchText:v,setSearchText:f}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8 w-full",children:[(0,t.jsxs)("div",{className:"mb-6 flex gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.A,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Filter by Scope:"})]}),(0,t.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"All"}),(0,t.jsx)("option",{value:"package",children:"Package Level (Root)"}),u&&(0,t.jsx)("option",{value:"space",children:"Space Level"})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{className:"w-4 h-4"}),"Scope"]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.A,{className:"w-4 h-4"}),"Space ID"]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scope/Permission"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:_.loading?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):0===L.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No space users found"})}):L.map(e=>{let s=(e=>{var s;return null==(s=M.data)?void 0:s.find(s=>s.id===e)})(e.user_id);return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:"/zz/profileImage/".concat(e.user_id,"/").concat((null==s?void 0:s.name)||"User"),alt:"profile",className:"w-8 h-8 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null==s?void 0:s.name)||"User ".concat(e.user_id)}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:(null==s?void 0:s.email)||"ID: ".concat(e.user_id)})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(0===e.space_id?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:0===e.space_id?"Package (Root)":"Space"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:0===e.space_id?"-":e.space_id})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.scope||"-"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>A(e.id),className:"text-blue-600 hover:text-blue-900",children:(0,t.jsx)(d.A,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to remove this user from the space?")&&z(e.id)},className:"text-red-600 hover:text-red-900",children:(0,t.jsx)(o.A,{className:"w-4 h-4"})})]})})]},e.id)})})]})})})]}),S&&(0,t.jsx)(j,{users:M.data||[],spaceId:u,onClose:()=>C(!1),onSubmit:P}),k&&(0,t.jsx)(b,{spaceUser:L.find(e=>e.id===k),onClose:()=>A(null),onSubmit:e=>I(k,e)})]})},j=e=>{let{users:s,spaceId:a,onClose:l,onSubmit:i}=e,[c,n]=(0,r.useState)({user_id:"",space_id:a||0,scope:""});return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Add User to Space/Package"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({user_id:parseInt(c.user_id),space_id:0===c.space_id?void 0:c.space_id,scope:c.scope||void 0})},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),(0,t.jsxs)("select",{value:c.user_id,onChange:e=>n({...c,user_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select a user"}),s.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,t.jsxs)("select",{value:c.space_id,onChange:e=>n({...c,space_id:parseInt(e.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"0",children:"Package Level (Root)"}),a&&(0,t.jsx)("option",{value:a,children:"Space Level"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scope/Permission"}),(0,t.jsx)("input",{type:"text",value:c.scope,onChange:e=>n({...c,scope:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., admin, user, viewer"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Add User"})]})]})]})})},b=e=>{let{spaceUser:s,onClose:a,onSubmit:l}=e,[i,c]=(0,r.useState)({scope:s.scope||""});return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Edit Space User"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(i)},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scope/Permission"}),(0,t.jsx)("input",{type:"text",value:i.scope,onChange:e=>c({...i,scope:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., admin, user, viewer"})]}),(0,t.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,t.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Update"})]})]})]})})}},7071:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});var t=a(2115);let r=e=>{let[s,a]=(0,t.useState)(null),[r,l]=(0,t.useState)(!1),[i,c]=(0,t.useState)(null),n=async()=>{if(e.ready){l(!0),c(null);try{let s=await e.loader();a(s.data)}catch(e){c(e.message||"An error occurred")}finally{l(!1)}}};return(0,t.useEffect)(()=>{n()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:s,loading:r,error:i,reload:n}}},7108:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7473:(e,s,a)=>{Promise.resolve().then(a.bind(a,6933))},7580:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9946:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(2115);let r=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},l=function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,t.forwardRef)((e,s)=>{let{color:a="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:d="",children:o,iconNode:u,...p}=e;return(0,t.createElement)("svg",{ref:s,...i,width:r,height:r,stroke:a,strokeWidth:n?24*Number(c)/Number(r):c,className:l("lucide",d),...!o&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[s,a]=e;return(0,t.createElement)(s,a)}),...Array.isArray(o)?o:[o]])}),n=(e,s)=>{let a=(0,t.forwardRef)((a,i)=>{let{className:n,...d}=a;return(0,t.createElement)(c,{ref:i,iconNode:s,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...d})});return a.displayName=r(e),a}}},e=>{e.O(0,[3464,8738,8441,5964,7358],()=>e(e.s=7473)),_N_E=e.O()}]);