(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8367],{1539:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},2525:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2569:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(5155),r=s(7924),l=s(1539);let n=e=>(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 ".concat(e.className),children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(r.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:e.placeholder||"Search spaces...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.searchText,onChange:t=>e.setSearchText(t.target.value)}),(0,a.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",onClick:e.onSearchButtonClick,children:(0,a.jsx)(l.A,{className:"w-5 h-5 text-gray-400"})})]})})})},2706:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155);let r=e=>(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"h4",children:e.name}),(0,a.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},2780:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,M:()=>r});var a=s(5155);let r=e=>(0,a.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-base preset-filled bg-primary-600 text-white",children:e.name||"Add"}),l=r},3717:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4678:(e,t,s)=>{"use strict";s.d(t,{$V:()=>r.$V,AC:()=>r.AC,B9:()=>r.B9,Cs:()=>r.Cs,De:()=>r.De,Ed:()=>r.Ed,H1:()=>r.H1,H4:()=>r.H4,K4:()=>r.K4,Kh:()=>r.Kh,Lv:()=>r.Lv,MA:()=>r.MA,MH:()=>a.MH,NC:()=>a.NC,Nv:()=>r.Nv,Om:()=>r.Om,P6:()=>r.P6,Pj:()=>r.Pj,QT:()=>r.QT,Qf:()=>r.Qf,Qk:()=>r.Qk,R5:()=>r.R5,Sx:()=>r.Sx,T:()=>r.T,TT:()=>r.TT,TY:()=>r.TY,Tv:()=>r.Tv,U8:()=>r.U8,VG:()=>r.VG,Y3:()=>r.Y3,ZN:()=>r.ZN,_Q:()=>r._Q,_m:()=>r._m,a1:()=>a.a1,cZ:()=>r.cZ,ct:()=>r.ct,e0:()=>r.e0,eK:()=>r.eK,fB:()=>r.fB,iY:()=>r.iY,lB:()=>r.lB,lo:()=>r.lo,q0:()=>r.q0,qf:()=>r.qf,rf:()=>r.rf,s2:()=>r.s2,tF:()=>r.tF,to:()=>r.to,u1:()=>r.u1,uP:()=>r.uP,yn:()=>r.yn,z6:()=>r.z6});var a=s(3999),r=s(1886)},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},6342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),r=s(2115),l=s(1539),n=s(3717),i=s(2525),c=s(5695),d=s(2706),o=s(2569),x=s(2780),u=s(4678),p=s(7071);function h(){let e=(0,c.useSearchParams)(),t=e.get("install_id"),s=e.get("space_id");return t?(0,a.jsx)(m,{installId:parseInt(t),spaceId:s?parseInt(s):void 0}):(0,a.jsx)("div",{children:"Install ID not provided"})}let m=e=>{var t;let{installId:s,spaceId:h}=e,m=(0,c.useRouter)(),[g,y]=(0,r.useState)(""),f=(0,p.A)({loader:()=>(0,u.P6)(s,void 0),ready:!0,dependencies:[s,h]}),v=(null==(t=f.data)?void 0:t.filter(e=>""===g||e.event_key.toLowerCase().includes(g.toLowerCase())||e.target_type.toLowerCase().includes(g.toLowerCase())||e.target_endpoint.toLowerCase().includes(g.toLowerCase())))||[],j=async e=>{try{await (0,u.H4)(s,e),f.reload()}catch(e){var t,a;console.error("Failed to delete event subscription:",e),alert("Failed to delete event subscription: "+((null==e||null==(a=e.response)||null==(t=a.data)?void 0:t.error)||(null==e?void 0:e.message)))}};return(0,a.jsxs)(d.A,{Icon:l.A,name:"Event Subscriptions",description:"Subscribe events from other spaces and execute actions",rightContent:(0,a.jsx)(x.M,{name:"+ New Subscription",onClick:()=>{let e=new URLSearchParams;e.set("install_id",s.toString()),h&&e.set("space_id",h.toString()),m.push("/portal/admin/spaces/tools/events/new?".concat(e.toString()))}}),children:[(0,a.jsx)(o.A,{searchText:g,setSearchText:y}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8 w-full",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event Key"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Target Type"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endpoint"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scope"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.loading?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):0===v.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No event subscriptions found"})}):v.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-yellow-500"}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.event_key||"-"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.target_type||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900 truncate max-w-xs",children:e.target_endpoint||"-"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(0===e.space_id?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"),children:0===e.space_id?"Package (Root)":"Space ".concat(e.space_id)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.disabled?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.disabled?"Disabled":"Active"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>(e=>{let t=new URLSearchParams;t.set("install_id",s.toString()),t.set("event_id",e.toString()),h&&t.set("space_id",h.toString()),m.push("/portal/admin/spaces/tools/events/edit?".concat(t.toString()))})(e.id),className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete this event subscription?")&&j(e.id)},className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})]})})]},e.id))})]})})})})]})}},7071:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(2115);let r=e=>{let[t,s]=(0,a.useState)(null),[r,l]=(0,a.useState)(!1),[n,i]=(0,a.useState)(null),c=async()=>{if(e.ready){l(!0),i(null);try{let t=await e.loader();s(t.data)}catch(e){i(e.message||"An error occurred")}finally{l(!1)}}};return(0,a.useEffect)(()=>{c()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:t,loading:r,error:n,reload:c}}},7924:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:x,...u}=e;return(0,a.createElement)("svg",{ref:t,...n,width:r,height:r,stroke:s,strokeWidth:c?24*Number(i)/Number(r):i,className:l("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:c,...d}=s;return(0,a.createElement)(i,{ref:n,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return s.displayName=r(e),s}},9952:(e,t,s)=>{Promise.resolve().then(s.bind(s,6342))}},e=>{e.O(0,[3464,1886,8441,5964,7358],()=>e(e.s=9952)),_N_E=e.O()}]);