(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7291],{1154:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});let c=(0,a(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1886:(e,t,a)=>{"use strict";a.d(t,{$V:()=>A,$c:()=>d,AC:()=>z,B9:()=>I,BA:()=>v,Cs:()=>ee,De:()=>R,Ed:()=>N,H1:()=>ep,H4:()=>ey,IF:()=>k,K4:()=>_,Kh:()=>ed,Ku:()=>eb,Lv:()=>Y,MA:()=>F,Nv:()=>eo,Om:()=>ec,Oz:()=>p,P6:()=>el,Pj:()=>Z,QD:()=>u,QT:()=>X,Qf:()=>L,Qk:()=>er,Ql:()=>f,R5:()=>Q,Sx:()=>W,T:()=>ea,TT:()=>V,TY:()=>et,Tv:()=>E,U8:()=>B,UP:()=>ek,VG:()=>P,Y3:()=>s,YT:()=>D,ZN:()=>K,_Q:()=>ex,_m:()=>m,ct:()=>q,e0:()=>U,eK:()=>$,eq:()=>y,fB:()=>C,gw:()=>ev,iD:()=>n,iJ:()=>h,iQ:()=>w,iY:()=>M,ir:()=>g,iu:()=>b,j3:()=>x,lB:()=>H,lo:()=>i,mm:()=>e_,no:()=>ef,q0:()=>G,qR:()=>eh,qf:()=>es,rf:()=>eu,s2:()=>T,sI:()=>em,si:()=>ew,tF:()=>S,to:()=>en,u1:()=>J,uP:()=>O,wz:()=>l,yj:()=>eg,yn:()=>j,z6:()=>ei});var c=a(3464),r=a(3999);let o=c.A.create({baseURL:"/zz/api"}),s=()=>{let e=(0,r.MH)(),t={"Content-Type":"application/json","X-Clacks-Overhead":"Aaron Swartz"};(null==e?void 0:e.accessToken)&&(t.Authorization="TokenV1 ".concat(e.accessToken)),o=c.A.create({baseURL:"/zz/api",headers:t})},n=async(e,t)=>o.post("/core/auth/login",{username:e,password:t}),i=async()=>o.get("/core/user"),l=async e=>o.get("/core/user/".concat(e)),p=async()=>o.get("/core/user/invites"),d=async e=>o.post("/core/user/invites",e),u=async e=>o.delete("/core/user/invites/".concat(e)),y=async e=>o.post("/core/user/invites/".concat(e,"/resend")),g=async e=>o.get("/core/auth/invite/".concat(e)),f=async(e,t)=>o.post("/core/auth/invite/".concat(e),t),m=async e=>o.post("/core/user/create",e),_=async()=>o.get("/core/user/groups"),v=async e=>o.post("/core/user/groups",e),h=async(e,t)=>o.put("/core/user/groups/".concat(e),t),k=async e=>o.delete("/core/user/groups/".concat(e)),w=async e=>o.get("/core/self/portalData/".concat(e)),x=async()=>o.get("/core/self/info"),b=async e=>o.put("/core/self/bio",{bio:e}),N=async e=>o.post("/core/package/install",{url:e}),S=async e=>o.post("/core/package/install/zip",e,{headers:{"Content-Type":"application/zip"}}),C=async(e,t)=>o.post("/core/package/install/embed",{name:e,repo_slug:t}),T=async e=>o.delete("/core/package/".concat(e)),z=async e=>o.post("/core/package/".concat(e,"/dev-token")),A=async e=>{let t=e?"?repo=".concat(encodeURIComponent(e)):"";return o.get("/core/package/list".concat(t))},O=async()=>o.get("/core/repo/list"),j=async()=>o.get("/core/space/installed"),P=async e=>o.get("/core/package/".concat(e,"/info")),R=async(e,t)=>{let a=encodeURIComponent(t);return o.get("/core/engine/space_info/".concat(e,"?host_name=").concat(a.toString()))},D=async(e,t)=>{let a=window.location.hostname;return o.get("/core/engine/derivehost/".concat(e,"?host_name=").concat(a,"&space_id=").concat(t))},J=async(e,t)=>o.post("/core/space/authorize/".concat(e),{space_id:t}),F=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.get("/core/vpackage/".concat(e,"/files"),{params:{path:t}})},E=async(e,t)=>o.get("/core/vpackage/".concat(e,"/files/").concat(t,"/download"),{responseType:"blob"}),U=async(e,t)=>o.delete("/core/vpackage/".concat(e,"/files/").concat(t)),B=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=new FormData;return c.append("file",t),c.append("path",a),o.post("/core/vpackage/".concat(e,"/files/upload"),c,{headers:{"Content-Type":"multipart/form-data"}})},I=async function(e,t,a,c){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await U(e,t);let s=new File([new Blob([a],{type:"text/plain"})],c,{type:"text/plain"}),n=new FormData;return n.append("file",s),n.append("path",r),o.post("/core/vpackage/".concat(e,"/files/upload"),n,{headers:{"Content-Type":"multipart/form-data"}})},L=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return o.get("/core/space/".concat(e,"/kv"),{params:{offset:t,limit:a}})},Q=async(e,t)=>o.get("/core/space/".concat(e,"/kv/").concat(t)),M=async(e,t)=>o.post("/core/space/".concat(e,"/kv"),t),H=async(e,t,a)=>o.put("/core/space/".concat(e,"/kv/").concat(t),a),Y=async(e,t)=>o.delete("/core/space/".concat(e,"/kv/").concat(t)),q=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return o.get("/core/space/".concat(e,"/files"),{params:{path:t}})},K=async(e,t)=>o.get("/core/space/".concat(e,"/files/").concat(t,"/download"),{responseType:"blob"}),W=async(e,t)=>o.delete("/core/space/".concat(e,"/files/").concat(t)),$=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=new FormData;return c.append("file",t),c.append("path",a),o.post("/core/space/".concat(e,"/files/upload"),c,{headers:{"Content-Type":"multipart/form-data"}})},V=async function(e,t,a,c){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";await W(e,t);let s=new File([new Blob([a],{type:"text/plain"})],c,{type:"text/plain"}),n=new FormData;return n.append("file",s),n.append("path",r),o.post("/core/space/".concat(e,"/files/upload"),n,{headers:{"Content-Type":"multipart/form-data"}})},Z=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.post("/core/space/".concat(e,"/files/folder"),{name:t,path:a})},G=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",c=arguments.length>3?arguments[3]:void 0;return o.post("/core/space/".concat(e,"/files/presigned"),{file_name:t,path:a,expiry:c})},X=async(e,t)=>{let a=new FormData;return a.append("file",t),c.A.post("/zz/file/upload-presigned?presigned-key=".concat(e),a,{headers:{"Content-Type":"multipart/form-data"}})},ee=async()=>o.get("/core/capability/types"),et=async(e,t,a)=>o.get("/core/space/".concat(e,"/capabilities"),{params:{...void 0!==t&&{space_id:t},...a&&{capability_type:a}}}),ea=async(e,t)=>o.post("/core/space/".concat(e,"/capabilities"),t),ec=async(e,t,a)=>o.put("/core/space/".concat(e,"/capabilities/").concat(t),a),er=async(e,t)=>o.delete("/core/space/".concat(e,"/capabilities/").concat(t)),eo=async(e,t,a,c)=>o.get("/core/space/".concat(e,"/users"),{params:{...void 0!==t&&{space_id:t},...void 0!==a&&{user_id:a},...c&&{scope:c}}}),es=async(e,t)=>o.post("/core/space/".concat(e,"/users"),t),en=async(e,t,a)=>o.put("/core/space/".concat(e,"/users/").concat(t),a),ei=async(e,t)=>o.delete("/core/space/".concat(e,"/users/").concat(t)),el=async(e,t,a)=>o.get("/core/space/".concat(e,"/events"),{params:{...void 0!==t&&{space_id:t},...a&&{event_key:a}}}),ep=async(e,t)=>o.get("/core/space/".concat(e,"/events/").concat(t)),ed=async(e,t)=>{let a={event_key:t.event_key,target_type:t.target_type,...void 0!==t.space_id&&{space_id:t.space_id},...t.target_endpoint&&{target_endpoint:t.target_endpoint},...t.target_options&&{target_options:"string"==typeof t.target_options?t.target_options:JSON.stringify(t.target_options)},...t.target_code&&{target_code:t.target_code},...void 0!==t.target_space_id&&{target_space_id:t.target_space_id},...t.rules&&{rules:"string"==typeof t.rules?t.rules:JSON.stringify(t.rules)},...t.transform&&{transform:"string"==typeof t.transform?t.transform:JSON.stringify(t.transform)},...void 0!==t.delay_start&&{delay_start:t.delay_start},...void 0!==t.retry_delay&&{retry_delay:t.retry_delay},...void 0!==t.max_retries&&{max_retries:t.max_retries},...t.extrameta&&{extrameta:"string"==typeof t.extrameta?t.extrameta:JSON.stringify(t.extrameta)},...void 0!==t.disabled&&{disabled:t.disabled}};return o.post("/core/space/".concat(e,"/events"),a)},eu=async(e,t,a)=>{let c={};return void 0!==a.event_key&&(c.event_key=a.event_key),void 0!==a.target_type&&(c.target_type=a.target_type),void 0!==a.space_id&&(c.space_id=a.space_id),void 0!==a.target_endpoint&&(c.target_endpoint=a.target_endpoint),void 0!==a.target_options&&(c.target_options="string"==typeof a.target_options?a.target_options:JSON.stringify(a.target_options)),void 0!==a.target_code&&(c.target_code=a.target_code),void 0!==a.rules&&(c.rules="string"==typeof a.rules?a.rules:JSON.stringify(a.rules)),void 0!==a.transform&&(c.transform="string"==typeof a.transform?a.transform:JSON.stringify(a.transform)),void 0!==a.delay_start&&(c.delay_start=a.delay_start),void 0!==a.retry_delay&&(c.retry_delay=a.retry_delay),void 0!==a.max_retries&&(c.max_retries=a.max_retries),void 0!==a.extrameta&&(c.extrameta="string"==typeof a.extrameta?a.extrameta:JSON.stringify(a.extrameta)),void 0!==a.disabled&&(c.disabled=a.disabled),o.put("/core/space/".concat(e,"/events/").concat(t),c)},ey=async(e,t)=>o.delete("/core/space/".concat(e,"/events/").concat(t)),eg=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a={limit:t};return null!=e&&(a.after_id=e),o.get("/core/user/messages",{params:a})},ef=async()=>o.get("/core/user/messages/new"),em=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return o.get("/core/user/messages/history",{params:{limit:e}})},e_=async e=>o.delete("/core/user/messages/".concat(e)),ev=async e=>o.post("/core/user/messages/".concat(e,"/read")),eh=async()=>o.post("/core/user/messages/read-all"),ek=async()=>o.get("/core/docs/docs_index.json"),ew=async e=>o.get("/core/docs/".concat(e)),ex=async e=>o.get("/capabilities/debug/".concat(e)),eb=async e=>o.get("/core/space/".concat(e,"/spec.json"))},3999:(e,t,a)=>{"use strict";a.d(t,{MH:()=>o,NC:()=>r,a1:()=>s});let c="_potato_login_info_",r=(e,t)=>{localStorage.setItem(c,JSON.stringify({accessToken:e,userInfo:t}))},o=()=>{let e=localStorage.getItem(c);return e?JSON.parse(e):null},s=()=>{localStorage.removeItem(c)}},4500:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var c=a(5155),r=a(1886),o=a(1154),s=a(5695),n=a(2115);function i(){let e=(0,s.useSearchParams)(),t=e.get("nskey"),a=e.get("space_id"),i=e.get("load_page"),[l,p]=(0,n.useState)(!0),d=(0,n.useRef)(null),[u,y]=(0,n.useState)(""),g=async()=>{if(t){p(!0);try{let e=Date.now(),c=await (0,r.YT)(t,a||void 0);if(200!==c.status)return void console.error("failed to derive host");let o=Date.now()-e;console.log("deriveHost took ".concat(o,"ms")),y(((e,t)=>{let a="/zz/space/".concat(e);if(t){let c=window.location.origin,r=c.startsWith("https//"),o=c.includes(":"),s=o?c.split(":").at(-1):"";a="".concat(r?"https://":"http://").concat(t).concat(o?":"+s:"","/zz/space/").concat(e)}return a})(t,c.data.host)),setTimeout(()=>{p(!1)},Math.min(Math.max(200,o),1e4))}catch(e){console.error(e)}}};return(0,n.useEffect)(()=>{t&&a&&g()},[t,a]),console.log(u),(0,c.jsx)("div",{className:"p-1",children:(0,c.jsxs)("div",{className:"p-1 rounded-md w-full min-h-[99vh] border border-primary-100 flex flex-col",children:[l&&(0,c.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,c.jsx)(o.A,{className:"w-12 h-12 animate-spin my-20"})}),u&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("iframe",{ref:d,src:i?"".concat(u,"/").concat(i):u,className:l?"h-[1px] w-[1px]":"w-full h-full flex-grow"})})]})})}},5695:(e,t,a)=>{"use strict";var c=a(8999);a.o(c,"usePathname")&&a.d(t,{usePathname:function(){return c.usePathname}}),a.o(c,"useRouter")&&a.d(t,{useRouter:function(){return c.useRouter}}),a.o(c,"useSearchParams")&&a.d(t,{useSearchParams:function(){return c.useSearchParams}})},6902:(e,t,a)=>{Promise.resolve().then(a.bind(a,4500))},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var c=a(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,c.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:l="",children:p,iconNode:d,...u}=e;return(0,c.createElement)("svg",{ref:t,...s,width:r,height:r,stroke:a,strokeWidth:i?24*Number(n)/Number(r):n,className:o("lucide",l),...!p&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...d.map(e=>{let[t,a]=e;return(0,c.createElement)(t,a)}),...Array.isArray(p)?p:[p]])}),i=(e,t)=>{let a=(0,c.forwardRef)((a,s)=>{let{className:i,...l}=a;return(0,c.createElement)(n,{ref:s,iconNode:t,className:o("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...l})});return a.displayName=r(e),a}}},e=>{e.O(0,[3464,8441,5964,7358],()=>e(e.s=6902)),_N_E=e.O()}]);