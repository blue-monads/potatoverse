(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6389],{1380:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},1539:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2569:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(5155),s=a(7924),l=a(1539);let o=e=>(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 ".concat(e.className),children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(s.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,r.jsx)("input",{type:"text",placeholder:e.placeholder||"Search spaces...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.searchText,onChange:t=>e.setSearchText(t.target.value)}),(0,r.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",onClick:e.onSearchButtonClick,children:(0,r.jsx)(l.A,{className:"w-5 h-5 text-gray-400"})})]})})})},2706:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(5155);let s=e=>(0,r.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"h4",children:e.name}),(0,r.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},3620:(e,t,a)=>{Promise.resolve().then(a.bind(a,7906))},3717:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4653:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},5169:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},5968:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},7071:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2115);let s=e=>{let[t,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[o,n]=(0,r.useState)(null),i=async()=>{if(e.ready){l(!0),n(null);try{let t=await e.loader();a(t.data)}catch(e){n(e.message||"An error occurred")}finally{l(!1)}}};return(0,r.useEffect)(()=>{i()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:t,loading:s,error:o,reload:i}}},7906:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(5155),s=a(2115),l=a(1380),o=a(9869),n=a(4616),i=a(5968),c=a(4653),d=a(5169),x=a(9890),u=a(3717),h=a(1788),p=a(2525),g=a(5695),m=a(2706),b=a(4678),y=a(7071),f=a(993),j=a(2569);function v(){let e=(0,g.useRouter)(),t=(0,g.useSearchParams)().get("install_id"),{modal:a}=(0,f.ii)();return t?(0,r.jsx)(w,{installId:parseInt(t)}):(0,r.jsx)(m.A,{Icon:l.A,name:"Space Files",description:"Select a space to view files",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No space selected"}),(0,r.jsx)("button",{onClick:()=>e.back(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})})}let w=e=>{let{installId:t}=e,[a,x]=(0,s.useState)(""),[u,h]=(0,s.useState)(""),[p,g]=(0,s.useState)("list"),[v,w]=(0,s.useState)(!1),k=(0,s.useRef)(null),C=(0,f.ii)(),{modal:M}=C,S=(0,y.A)({loader:()=>(0,b.ct)(t,a),ready:C.isInitialized,dependencies:[a,u]}),_=(S.data||[]).filter(e=>{let t=e.path===a,r=e.name.toLowerCase().includes(u.toLowerCase());return t&&r}),P=_.filter(e=>e.is_folder),D=_.filter(e=>!e.is_folder),F=a.split("/").filter(Boolean),z=async e=>{try{let a=await (0,b.ZN)(t,e.id),r=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=r,s.setAttribute("download",e.name),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(r)}catch(e){console.error("Download failed:",e)}},E=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await (0,b.Sx)(t,e.id),S.reload()}catch(e){console.error("Delete failed:",e)}},U=async e=>{try{let s=await (0,b.ZN)(t,e.id);if(!(s.data instanceof Blob))throw Error("Expected blob response but got something else");let l=await s.data.text();M.openModal({title:"Edit ".concat(e.name),content:(0,r.jsx)(A,{installId:t,file:e,initialContent:l,currentPath:a,onSave:()=>{S.reload(),M.closeModal()},onCancel:()=>M.closeModal()}),size:"xl"})}catch(e){console.error("Failed to load file for editing:",e),alert("Failed to load file for editing. The file might be too large, not a text file, or corrupted.")}},T=async e=>{if(e.trim())try{await (0,b.Pj)(t,e.trim(),a),M.closeModal(),S.reload()}catch(e){console.error("Create folder failed:",e)}},L=()=>{let[e,t]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder Name"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter folder name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onKeyDown:t=>{"Enter"===t.key&&e.trim()?T(e):"Escape"===t.key&&M.closeModal()}})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>M.closeModal(),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>T(e),disabled:!e.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:"Create Folder"})]})]})},R=()=>{let[e,l]=(0,s.useState)("regular"),[n,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[x,u]=(0,s.useState)("curl"),h=async()=>{if(n.trim())try{let e=await (0,b.q0)(t,n.trim(),a,3600);d(e.data)}catch(e){console.error("Generate presigned URL failed:",e)}};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg",children:[(0,r.jsx)("button",{onClick:()=>l("regular"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("regular"===e?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Regular Upload"}),(0,r.jsx)("button",{onClick:()=>l("presigned"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("presigned"===e?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Presigned Upload"})]}),"regular"===e&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Regular Upload"}),(0,r.jsx)("p",{className:"text-sm text-blue-800",children:"Upload files directly from your device. Files will be uploaded immediately to the current directory."})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Click to select files or drag and drop"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Multiple files supported"}),(0,r.jsx)("input",{ref:k,type:"file",multiple:!0,onChange:async e=>{let r=e.target.files;if(r&&0!==r.length){w(!0);try{for(let e of Array.from(r))await (0,b.eK)(t,e,a);S.reload(),M.closeModal()}catch(e){console.error("Upload failed:",e),alert("Upload failed: "+e)}finally{w(!1),k.current&&(k.current.value="")}}},className:"hidden"}),(0,r.jsx)("button",{onClick:()=>{var e;return null==(e=k.current)?void 0:e.click()},disabled:v,className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:v?"Uploading...":"Select Files"})]})]}),"presigned"===e&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-purple-900 mb-2",children:"Presigned Upload"}),(0,r.jsx)("p",{className:"text-sm text-purple-800",children:"Generate a temporary token that can be used to upload files without authentication. Perfect for third-party integrations, CLI tools, or sharing upload capabilities securely."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"File Name"}),(0,r.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"e.g., document.pdf",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"The uploaded file must match this exact filename"})]}),(0,r.jsx)("button",{onClick:h,disabled:!n.trim(),className:"w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50",children:"Generate Presigned Token"}),c&&(0,r.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,r.jsxs)("p",{className:"text-sm text-green-800 font-medium",children:["✓ Token generated successfully! Expires in ",c.expiry," seconds"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presigned Token"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:c.presigned_token,readOnly:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono text-xs"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(c.presigned_token)},className:"absolute right-2 top-2 px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded",children:"Copy"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload URL"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:"".concat(window.location.origin).concat(c.upload_url),readOnly:!0,className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg font-mono text-xs"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("".concat(window.location.origin).concat(c.upload_url))},className:"absolute right-2 top-2 px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded",children:"Copy"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Upload Examples"}),(0,r.jsxs)("div",{className:"flex gap-1 mb-3 overflow-x-auto",children:[(0,r.jsx)("button",{onClick:()=>u("curl"),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap ".concat("curl"===x?"bg-gray-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"cURL"}),(0,r.jsx)("button",{onClick:()=>u("javascript"),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap ".concat("javascript"===x?"bg-gray-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"JavaScript"}),(0,r.jsx)("button",{onClick:()=>u("python"),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap ".concat("python"===x?"bg-gray-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Python"}),(0,r.jsx)("button",{onClick:()=>u("browser"),className:"px-3 py-1.5 text-xs font-medium rounded transition-colors whitespace-nowrap ".concat("browser"===x?"bg-gray-900 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Browser"})]}),(0,r.jsxs)("div",{children:["curl"===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:'curl -X POST \\\n  "'.concat(window.location.origin).concat(c.upload_url,'" \\\n  -F "file=@').concat(n,'"')}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText('curl -X POST "'.concat(window.location.origin).concat(c.upload_url,'" -F "file=@').concat(n,'"'))},className:"mt-2 text-xs text-purple-600 hover:text-purple-800",children:"Copy Command"})]}),"javascript"===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:"const formData = new FormData();\nformData.append('file', fileInput.files[0]);\n\nfetch('".concat(window.location.origin).concat(c.upload_url,"', {\n  method: 'POST',\n  body: formData\n}).then(res => res.json())\n  .then(data => console.log(data));")}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("const formData = new FormData();\nformData.append('file', fileInput.files[0]);\n\nfetch('".concat(window.location.origin).concat(c.upload_url,"', {\n  method: 'POST',\n  body: formData\n}).then(res => res.json())\n  .then(data => console.log(data));"))},className:"mt-2 text-xs text-purple-600 hover:text-purple-800",children:"Copy Code"})]}),"python"===x&&(0,r.jsxs)("div",{children:[(0,r.jsx)("pre",{className:"bg-gray-900 text-green-400 p-3 rounded-lg text-xs overflow-x-auto",children:"import requests\n\nwith open('".concat(n,"', 'rb') as f:\n    files = {'file': f}\n    response = requests.post(\n        '").concat(window.location.origin).concat(c.upload_url,"',\n        files=files\n    )\nprint(response.json())")}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("import requests\n\nwith open('".concat(n,"', 'rb') as f:\n    files = {'file': f}\n    response = requests.post(\n        '").concat(window.location.origin).concat(c.upload_url,"',\n        files=files\n    )\nprint(response.json())"))},className:"mt-2 text-xs text-purple-600 hover:text-purple-800",children:"Copy Code"})]}),"browser"===x&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Share this link with users to upload via web browser:"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:"".concat(window.location.origin,"/zz/pages/presigned/file?presigned-key=").concat(c.presigned_token),readOnly:!0,className:"w-full px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg font-mono text-xs"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText("".concat(window.location.origin,"/zz/pages/presigned/file?presigned-key=").concat(c.presigned_token))},className:"absolute right-2 top-2 px-2 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded",children:"Copy"})]}),(0,r.jsx)("a",{href:"/zz/pages/presigned/file?presigned-key=".concat(c.presigned_token),target:"_blank",rel:"noopener noreferrer",className:"inline-block text-xs text-purple-600 hover:text-purple-800",children:"Open Upload Page →"})]})]})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:(0,r.jsx)("button",{onClick:()=>{M.closeModal(),i(""),d(null)},className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Close"})})]})};return(0,r.jsx)(m.A,{Icon:l.A,name:"Space Files",description:"Managing files for spaces",rightContent:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("button",{onClick:()=>{M.openModal({title:"Create New Folder",content:(0,r.jsx)(L,{}),size:"md"})},className:"flex items-center gap-2 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",children:[(0,r.jsx)(n.A,{className:"w-4 h-4"}),"New Folder"]}),(0,r.jsxs)("button",{onClick:()=>{M.openModal({title:"Upload Files",content:(0,r.jsx)(R,{}),size:"lg"})},disabled:v,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:[(0,r.jsx)(o.A,{className:"w-4 h-4"}),v?"Uploading...":"Upload Files"]})]}),children:(0,r.jsxs)("div",{className:"card m-4 p-4 flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between bg-white",children:[(0,r.jsx)("div",{className:"flex w-full",children:(0,r.jsx)(j.A,{searchText:u,setSearchText:h,placeholder:"Search files...",onSearchButtonClick:()=>S.reload(),className:"w-full"})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>g("list"),className:"p-2 rounded ".concat("list"===p?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,r.jsx)(i.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:()=>g("grid"),className:"p-2 rounded ".concat("grid"===p?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,r.jsx)(c.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("nav",{className:"flex items-center space-x-2 text-sm rounded-lg bg-white p-4 border border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>x(""),className:"text-blue-500 hover:text-blue-700",children:"Root"}),F.map((e,t)=>(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("span",{className:"text-gray-400",children:"/"}),(0,r.jsx)("button",{onClick:()=>{x(F.slice(0,t+1).join("/"))},className:"text-blue-500 hover:text-blue-700",children:e})]},t))]}),a&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("button",{onClick:()=>{let e=a.split("/");e.pop(),x(e.join("/"))},className:"flex items-center gap-2 text-blue-500 hover:text-blue-700",children:[(0,r.jsx)(d.A,{className:"w-4 h-4"}),"Back"]})}),S.loading?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Loading files..."})]})}):0===_.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No files found"})]})}):(0,r.jsxs)("div",{className:"grid"===p?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-2",children:[P.map(e=>(0,r.jsx)(N,{file:e,viewMode:p,onDoubleClick:()=>(e=>{x(a?"".concat(a,"/").concat(e.name):e.name)})(e),onDownload:()=>{},onEdit:()=>{},onDelete:()=>E(e)},e.id)),D.map(e=>(0,r.jsx)(N,{file:e,viewMode:p,onDoubleClick:()=>z(e),onDownload:()=>z(e),onEdit:()=>U(e),onDelete:()=>E(e)},e.id))]})]})})},N=e=>{let{file:t,viewMode:a,onDoubleClick:o,onDownload:n,onEdit:i,onDelete:c}=e,[d,g]=(0,s.useState)(!1);return"grid"===a?(0,r.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer group relative",onDoubleClick:o,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:t.is_folder?(0,r.jsx)(l.A,{className:"w-8 h-8 text-blue-500"}):(0,r.jsx)(x.A,{className:"w-8 h-8 text-gray-500"})}),(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate w-full",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:t.is_folder?"Folder":k(t.size)})]}),d&&!t.is_folder&&(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Edit file",children:(0,r.jsx)(u.A,{className:"w-3 h-3"})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Download file",children:(0,r.jsx)(h.A,{className:"w-3 h-3"})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100 text-red-500",title:"Delete file",children:(0,r.jsx)(p.A,{className:"w-3 h-3"})})]})]}):(0,r.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer group",onDoubleClick:o,onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[(0,r.jsx)("div",{className:"flex-shrink-0 mr-3",children:t.is_folder?(0,r.jsx)(l.A,{className:"w-5 h-5 text-blue-500"}):(0,r.jsx)(x.A,{className:"w-5 h-5 text-gray-500"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:t.is_folder?"Folder":"".concat(k(t.size)," • ").concat(C(t.created_at))})]}),d&&!t.is_folder&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-1 hover:bg-gray-200 rounded",title:"Edit file",children:(0,r.jsx)(u.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-1 hover:bg-gray-200 rounded",title:"Download file",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"p-1 hover:bg-gray-200 rounded text-red-500",title:"Delete file",children:(0,r.jsx)(p.A,{className:"w-4 h-4"})})]})]})},k=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},C=e=>new Date(e).toLocaleDateString(),A=e=>{let{installId:t,file:a,initialContent:l,currentPath:o,onSave:n,onCancel:i}=e,[c,d]=(0,s.useState)(l),[x,u]=(0,s.useState)(!1),h=(0,s.useRef)(null);(0,s.useEffect)(()=>{h.current&&h.current.focus()},[]);let p=async()=>{u(!0);try{await (0,b.TT)(t,a.id,c,a.name,o),n()}catch(e){console.error("Failed to save file:",e),alert("Failed to save file. Please try again.")}finally{u(!1)}};return(0,r.jsxs)("div",{className:"flex flex-col h-full max-h-[80vh]",children:[(0,r.jsx)("div",{className:"flex-1 mb-4",children:(0,r.jsx)("textarea",{ref:h,value:c,onChange:e=>d(e.target.value),className:"w-full h-full p-4 border border-gray-300 rounded-lg font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",style:{minHeight:"400px"},spellCheck:!1})}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[c.length," characters"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:i,disabled:x,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:p,disabled:x||c===l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:x?"Saving...":"Save"})]})]})]})}},7924:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9869:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9890:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:d,iconNode:x,...u}=e;return(0,r.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:a,strokeWidth:i?24*Number(n)/Number(s):n,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:i,...c}=a;return(0,r.createElement)(n,{ref:o,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return a.displayName=s(e),a}}},e=>{e.O(0,[3464,8738,8441,5964,7358],()=>e(e.s=3620)),_N_E=e.O()}]);