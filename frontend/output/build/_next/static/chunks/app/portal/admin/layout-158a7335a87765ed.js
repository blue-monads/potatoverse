(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9970],{232:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5155),n=s(2115),a=s(5695),o=s(6766),i=s(993),l=s(9946);let c=(0,l.A)("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),d=(0,l.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),h=(0,l.A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=s(7924),m=s(1886),g=s(3999);class x{subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}notifySubscribers(e){this.subscribers.forEach(t=>{try{t(e)}catch(e){console.error("Error in WebSocket subscriber:",e)}})}async checkSharedWorker(){if("undefined"==typeof SharedWorker)return!1;try{if(this.sharedWorker&&this.sharedWorkerPort)return new Promise(e=>{let t=setTimeout(()=>{e(!1)},1e3),s=r=>{var n;(null==(n=r.data)?void 0:n.type)==="pong"&&(clearTimeout(t),this.sharedWorkerPort.removeEventListener("message",s),e(!0))};this.sharedWorkerPort.addEventListener("message",s),this.sharedWorkerPort.postMessage({type:"ping"})});let e=new SharedWorker("/zz/pages/sw_websocket.js",{type:"module"});this.sharedWorker=e;let t=e.port;return this.sharedWorkerPort=t,t.start(),new Promise(e=>{let s=setTimeout(()=>{e(!1)},1e3),r=n=>{var a;(null==(a=n.data)?void 0:a.type)==="pong"&&(clearTimeout(s),t.removeEventListener("message",r),e(!0))};t.addEventListener("message",r),t.postMessage({type:"ping"})})}catch(e){return console.error("Error checking shared worker:",e),!1}}setupSharedWorkerMessageListener(){!this.sharedWorkerMessageHandler&&this.sharedWorkerPort&&(this.sharedWorkerMessageHandler=e=>{let{type:t,message:s,error:r}=e.data;if("ws-message"===t&&s)try{this.notifySubscribers(s)}catch(e){console.error("Failed to process shared worker message:",e)}else if("ws-connected"===t)console.log("[SW] WebSocket connected via shared worker"),this.reconnectAttempts=0,this.isConnecting=!1;else if("ws-closed"===t)console.log("[SW] WebSocket closed via shared worker"),this.isConnecting=!1;else if("ws-error"===t)console.error("[SW] WebSocket error via shared worker:",r),this.isConnecting=!1;else if("ws-reconnect-needed"===t){if(this.shouldBeConnected){console.log("[SW] Shared worker requested reconnect");let e=(0,g.MH)();(null==e?void 0:e.accessToken)&&this.sharedWorkerPort&&this.sharedWorkerPort.postMessage({type:"ws-connect",token:e.accessToken,host:window.location.host})}}else"ws-max-reconnect-reached"===t&&console.error("[SW] Max reconnection attempts reached in shared worker")},this.sharedWorkerPort.addEventListener("message",this.sharedWorkerMessageHandler))}removeSharedWorkerMessageListener(){this.sharedWorkerMessageHandler&&this.sharedWorkerPort&&(this.sharedWorkerPort.removeEventListener("message",this.sharedWorkerMessageHandler),this.sharedWorkerMessageHandler=null)}async connect(){var e,t;if((null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN){console.log("WebSocket already connected, skipping connection attempt"),this.shouldBeConnected=!0;return}if(this.isConnecting)return void console.log("WebSocket connection already in progress, skipping");if((null==(t=this.ws)?void 0:t.readyState)===WebSocket.CONNECTING){console.log("WebSocket is connecting, skipping duplicate connection"),this.shouldBeConnected=!0;return}this.shouldBeConnected=!0;let s=(0,g.MH)();if(!(null==s?void 0:s.accessToken))return void console.error("No access token available for WebSocket connection");if(await this.checkSharedWorker()){console.log("Shared worker is available, using it for WebSocket connection"),this.useSharedWorker=!0,this.setupSharedWorkerMessageListener(),this.sharedWorkerPort&&(this.isConnecting=!0,this.sharedWorkerPort.postMessage({type:"ws-connect",token:s.accessToken,host:window.location.host}));return}if(console.log("Shared worker not available, using direct WebSocket connection"),this.useSharedWorker=!1,this.ws){let e=this.ws.readyState;if(e!==WebSocket.CLOSED&&e!==WebSocket.CLOSING)return void console.log("WebSocket exists in valid state, not closing");this.ws=null}let r="https:"===window.location.protocol?"wss:":"ws:",n=s.accessToken,a="".concat(r,"//").concat(window.location.host,"/zz/api/core/user/messages/ws?token=").concat(encodeURIComponent(n));try{this.isConnecting=!0;let e=++this.connectionId;console.log("[Connection #".concat(e,"] Creating new WebSocket connection to:"),a.replace(/token=[^&]+/,"token=***"));let t=new WebSocket(a);t.onopen=()=>{e===this.connectionId?(console.log("[Connection #".concat(e,"] WebSocket connected for user notifications")),this.reconnectAttempts=0,this.isConnecting=!1,this.shouldBeConnected=!0):(console.log("[Connection #".concat(e,"] WebSocket opened but superseded by newer connection, closing")),t.close())},t.onmessage=e=>{try{let t=JSON.parse(e.data);this.notifySubscribers(t)}catch(e){console.error("Failed to parse WebSocket message:",e)}},t.onerror=t=>{e===this.connectionId&&(console.error("[Connection #".concat(e,"] WebSocket error:"),t),this.isConnecting=!1)},t.onclose=t=>{e===this.connectionId?(console.log("[Connection #".concat(e,"] WebSocket closed"),t.code,t.reason,"shouldBeConnected:",this.shouldBeConnected),this.ws=null,this.isConnecting=!1,1e3!==t.code&&this.reconnectAttempts<5&&this.shouldBeConnected?(this.reconnectAttempts+=1,console.log("[Connection #".concat(e,"] Attempting to reconnect (").concat(this.reconnectAttempts,"/").concat(5,")...")),this.reconnectTimeout=setTimeout(()=>{this.shouldBeConnected&&e===this.connectionId&&this.connect()},3e3)):this.reconnectAttempts>=5?console.error("[Connection #".concat(e,"] Max reconnection attempts reached. Falling back to polling.")):1e3===t.code&&console.log("[Connection #".concat(e,"] WebSocket closed normally (code 1000)"))):console.log("[Connection #".concat(e,"] WebSocket closed but was superseded, ignoring"))},e===this.connectionId?this.ws=t:(console.log("[Connection #".concat(e,"] Connection attempt superseded, closing")),t.close())}catch(e){console.error("Failed to create WebSocket connection:",e),this.isConnecting=!1}}disconnect(){this.shouldBeConnected=!1,this.useSharedWorker&&this.sharedWorkerPort?this.sharedWorkerPort.postMessage({type:"ws-disconnect"}):this.ws&&(this.ws.close(),this.ws=null),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null),this.fallbackInterval&&(clearInterval(this.fallbackInterval),this.fallbackInterval=null),this.reconnectAttempts=0,this.isConnecting=!1}isConnected(){return this.useSharedWorker?this.shouldBeConnected&&!this.isConnecting:null!==this.ws&&this.ws.readyState===WebSocket.OPEN}constructor(){this.ws=null,this.subscribers=new Set,this.reconnectTimeout=null,this.fallbackInterval=null,this.reconnectAttempts=0,this.isConnecting=!1,this.shouldBeConnected=!1,this.connectionId=0,this.useSharedWorker=!1,this.sharedWorker=null,this.sharedWorkerPort=null,this.sharedWorkerMessageHandler=null}}let f=new x,p=e=>{let[t,s]=(0,n.useState)([]),[r,a]=(0,n.useState)(0),[o,i]=(0,n.useState)(!1),l=(0,n.useCallback)(async()=>{if(e.isInitialized&&e.isAuthenticated)try{i(!0);let e=(await m.no()).data;s(e),a(e.filter(e=>!e.is_read).length)}catch(e){console.error("Failed to load new messages:",e)}finally{i(!1)}},[e.isInitialized,e.isAuthenticated]),c=(0,n.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;if(e.isInitialized&&e.isAuthenticated)try{i(!0);let e=(await m.sI(t)).data;s(e),a(e.filter(e=>!e.is_read).length)}catch(e){console.error("Failed to load message history:",e)}finally{i(!1)}},[e.isInitialized,e.isAuthenticated]),d=(0,n.useCallback)(async e=>{try{await m.gw(e),s(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),a(e=>Math.max(0,e-1))}catch(e){console.error("Failed to mark message as read:",e)}},[]),h=(0,n.useCallback)(async()=>{try{await m.qR(),s(e=>e.map(e=>({...e,is_read:!0}))),a(0)}catch(e){console.error("Failed to mark all messages as read:",e)}},[]),u=(0,n.useCallback)(e=>{s(t=>{let s=t.findIndex(t=>t.id===e.id);if(!(s>=0))return e.is_read||a(e=>e+1),[e,...t];{let r=t[s],n=[...t];return n[s]=e,a(t=>{let s=t;return!r.is_read&&e.is_read?s=Math.max(0,s-1):r.is_read&&!e.is_read&&(s+=1),s}),n}})},[]);return(e=>{let{isInitialized:t,isAuthenticated:s,onMessage:r,onFallback:a}=e,o=(0,n.useRef)(null),i=(0,n.useRef)(null),l=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=f.subscribe(r);return i.current=e,()=>{e()}},[r]),(0,n.useEffect)(()=>(a&&!f.isConnected()&&(l.current=setInterval(()=>{!f.isConnected()&&a&&a()},3e4)),()=>{l.current&&(clearInterval(l.current),l.current=null)}),[a]);let c=(0,n.useCallback)(()=>{f.connect()},[]),d=(0,n.useCallback)(()=>{f.disconnect()},[]);return(0,n.useCallback)(()=>f.isConnected(),[]),(0,n.useEffect)(()=>{let e=o.current,r={initialized:t,authenticated:s};setTimeout(()=>{e&&e.initialized===t&&e.authenticated===s||(console.log("Auth state changed:",{prev:e,current:r,isConnected:f.isConnected()}),t&&s?f.isConnected()?console.log("WebSocket already connected, skipping connect()"):c():d(),o.current=r)},5e3)},[t,s,c,d])})({isInitialized:e.isInitialized,isAuthenticated:e.isAuthenticated,onMessage:u,onFallback:l}),(0,n.useEffect)(()=>{e.isInitialized&&e.isAuthenticated&&l()},[e.isInitialized,e.isAuthenticated,l]),{notifications:t,unreadCount:r,loading:o,loadNewMessages:l,loadMessageHistory:c,markAsRead:d,markAllAsRead:h}};var b=s(6874),v=s.n(b),k=s(3786),w=s(437),y=s(4416);let j=e=>{let{isOpen:t,onClose:s}=e,a=(0,i.ii)(),o=p(a),l=(0,n.useRef)(!1);return(0,n.useEffect)(()=>{t&&a.isInitialized&&a.isAuthenticated&&!l.current&&(o.loadMessageHistory(50),l.current=!0),t||(l.current=!1)},[t,a.isInitialized,a.isAuthenticated,o.loadMessageHistory]),(0,n.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&s()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,s]),(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/20 z-40 transition-opacity",onClick:s}),(0,r.jsxs)("div",{className:"\n                fixed left-0 top-0 h-full w-96 bg-white shadow-2xl z-50\n                transform transition-transform duration-300 ease-in-out\n                flex flex-col\n                ".concat(t?"translate-x-0":"-translate-x-full","\n            "),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),o.unreadCount>0&&(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs font-medium text-white bg-red-500 rounded-full",children:o.unreadCount})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v(),{href:"/portal/admin/profile/messages",onClick:s,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",title:"See all messages",children:(0,r.jsx)(k.A,{className:"w-5 h-5"})}),o.unreadCount>0&&(0,r.jsx)("button",{onClick:o.markAllAsRead,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",title:"Mark all as read",children:(0,r.jsx)(w.A,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:s,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg transition-colors",title:"Close",children:(0,r.jsx)(y.A,{className:"w-5 h-5"})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:o.loading&&0===o.notifications.length?(0,r.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,r.jsx)("div",{className:"text-gray-400",children:"Loading..."})}):0===o.notifications.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[(0,r.jsx)(c,{className:"w-12 h-12 text-gray-300 mb-4"}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No notifications"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]}):(0,r.jsx)("div",{className:"divide-y divide-gray-100",children:o.notifications.map(e=>(0,r.jsx)("div",{className:"\n                                        p-4 hover:bg-gray-50 transition-colors cursor-pointer\n                                        border-l-4 ".concat((e=>e>=3?"border-l-red-500":e>=2?"border-l-orange-500":e>=1?"border-l-yellow-500":"border-l-blue-500")(e.warn_level),"\n                                        ").concat(e.is_read?"":"bg-blue-50/50","\n                                    "),onClick:()=>{e.is_read||o.markAsRead(e.id)},children:(0,r.jsx)("div",{className:"flex items-start gap-3",children:(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.title}),!e.is_read&&(0,r.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1.5"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.contents}),(0,r.jsx)("div",{className:"flex items-center justify-between gap-2",children:(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[(0,r.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-100 rounded text-gray-600",children:e.type}),(0,r.jsx)("span",{children:(e=>{if(!e)return"";let t=new Date(e),s=new Date().getTime()-t.getTime(),r=Math.floor(s/6e4),n=Math.floor(s/36e5),a=Math.floor(s/864e5);return r<1?"Just now":r<60?"".concat(r,"m ago"):n<24?"".concat(n,"h ago"):a<7?"".concat(a,"d ago"):t.toLocaleDateString()})(e.created_at)})]})})]})})},e.id))})})]})]})};function N(e){let{children:t}=e,[s,a]=(0,n.useState)(!1);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(W,{}),children:(0,r.jsxs)("div",{className:"flex bg-surface-50",children:[(0,r.jsx)(C,{onMessageClick:()=>a(!s)}),(0,r.jsx)("div",{className:"ml-14 w-full",children:t}),(0,r.jsx)(j,{isOpen:s,onClose:()=>a(!1)})]})})})}let C=e=>{let{onMessageClick:t}=e,[s,l]=(0,n.useState)(!1),h=(0,i.ii)(),u=(0,a.useRouter)(),m=p(h);return(0,n.useEffect)(()=>{l(!0)},[]),(0,n.useEffect)(()=>{h.loaded&&(h.isAuthenticated||u.push("/auth/login"))},[h.isAuthenticated,h.loaded]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("nav",{className:"fixed top-0 left-0 w-14 h-full border-r border-gray-200 bg-white space-y-8",children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsx)("div",{className:"h-16 flex items-center justify-center mx-auto",children:(0,r.jsx)(v(),{href:"/portal/admin",className:"flex-none",children:(0,r.jsx)(o.default,{src:"/zz/pages/logo.png",alt:"Potatoverse Logo",width:36,height:36})})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col h-full",children:[(0,r.jsx)("ul",{className:"px-4 text-sm font-medium flex-1 flex flex-col gap-2",children:S.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)(v(),{href:e.href,className:"relative flex items-center justify-center gap-x-2 text-gray-600 p-2 rounded-lg  hover:bg-gray-50 active:bg-gray-100 duration-150 group",children:[(0,r.jsx)("div",{className:"text-gray-500",children:e.icon}),(0,r.jsx)("span",{className:"absolute left-14 py-2 px-1.5 rounded-md whitespace-nowrap text-xs text-white bg-gray-800 hidden group-hover:inline-block group-focus:hidden duration-150",children:e.name})]})},t))}),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{className:"px-2 pb-4 text-sm font-medium gap-4 flex flex-col",children:[s&&h.loaded&&h.isAuthenticated&&h.userInfo&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{children:(0,r.jsxs)("button",{className:"relative flex items-center justify-center text-gray-600 rounded-lg  hover:bg-gray-50 active:bg-gray-100 duration-150 group p-2",onClick:t,title:"Notifications",children:[(0,r.jsx)(c,{className:"w-6 h-6"}),m.unreadCount>0&&(0,r.jsx)("span",{className:"absolute top-1 right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white"}),m.unreadCount>9&&(0,r.jsx)("span",{className:"absolute top-0 right-0 text-[10px] font-bold text-white bg-red-500 rounded-full w-4 h-4 flex items-center justify-center border border-white",children:m.unreadCount>99?"99+":m.unreadCount})]})}),(0,r.jsx)("li",{children:(0,r.jsx)(v(),{href:"/portal/admin/profile",title:"Profile",className:"relative flex items-center justify-center text-gray-600 rounded-lg  hover:bg-gray-50 active:bg-gray-100 duration-150 group",children:(0,r.jsx)("img",{src:"/zz/profileImage/11/".concat(h.userInfo.name),alt:"profile",className:"w-8 h-8 rounded-full"})})})]}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#",onClick:()=>{h.logOut(),u.push("/auth/login")},className:"relative flex items-center justify-center p-0.5 text-gray-600 rounded-lg  hover:bg-gray-50 active:bg-gray-100 duration-150 group",title:"Logout",children:(0,r.jsx)(d,{className:"w-6 h-6"})})})]})})]})]})})})},S=[{href:"/portal/admin",name:"Home",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",strokeWidth:"1.5",viewBox:"0 0 24 24",stroke:"currentColor",fill:"none",name:"home",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})},{href:"/portal/admin/spaces",name:"Spaces",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"})})},{href:"/portal/admin/store",name:"Store",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 48.39 48.39 0 01-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 00-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 01-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 00.657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 005.427-.63 48.05 48.05 0 00.582-4.717.532.532 0 00-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.96.401v0a.656.656 0 00.658-.663 48.422 48.422 0 00-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 01-.61-.58v0z"})})},{href:"/portal/admin/users",name:"Users",icon:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 7.5a3 3 0 11-6 0 3 3 0 016 0zm-6 3a6.75 6.75 0 00-6.75 6.75v1.5A2.25 2.25 0 006.75 21h10.5a2.25 2.25 0 002.25-2.25v-1.5A6.75 6.75 0 0010.5 10.5zM12 12a4.5 4.5 0 100-9 4.5 4.5 0 000 9z"})})},{href:"/portal/admin/help",name:"Help",icon:(0,r.jsx)(h,{className:"w-6 h-6"})}];function W(){return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"w-14 bg-white border-r border-gray-200 flex flex-col items-center py-4 space-y-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"}),(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-green-400 rounded-full"}),(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-lg animate-pulse"})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 py-6 flex items-center justify-between w-full",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto w-full px-8 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 ",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-200 rounded-lg flex items-center justify-center"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"w-20 h-5 bg-gray-200 rounded animate-pulse mb-1"}),(0,r.jsx)("div",{className:"w-32 h-3 bg-gray-200 rounded animate-pulse"})]})]}),(0,r.jsx)("div",{className:"w-24 h-8 bg-gray-200 rounded animate-pulse"})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto px-8 py-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.A,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,r.jsx)("div",{className:"w-full h-12 bg-white border border-gray-200 rounded-lg pl-12 animate-pulse"})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)("div",{className:"w-32 h-5 bg-gray-200 rounded animate-pulse"})}),(0,r.jsx)("div",{className:"w-32 h-6 bg-gray-200 rounded animate-pulse"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:Array.from({length:10}).map((e,t)=>(0,r.jsxs)("div",{className:"bg-gradient-to-br rounded-xl p-6 w-full max-w-sm relative overflow-hidden shadow",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-4 pb-10",children:(0,r.jsx)("div",{className:"w-16 h-6 bg-purple-100/50 rounded-full animate-pulse"})})})]},t))})]})]})]})}},437:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},993:(e,t,s)=>{"use strict";s.d(t,{ii:()=>o.i,bH:()=>a});var r=s(4678),n=s(2115);let a=()=>{let[e,t]=(0,n.useState)(!1),[s,a]=(0,n.useState)(!1),[o,i]=(0,n.useState)(null),l=(()=>{let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(null),a=(0,n.useCallback)(e=>{r(e),t(!0)},[]),o=(0,n.useCallback)(()=>{t(!1),(null==s?void 0:s.onClose)&&s.onClose(),setTimeout(()=>{r(null)},150)},[s]),i=(0,n.useCallback)(e=>{s&&r({...s,...e})},[s]);return{isOpen:e,modalContent:s,openModal:a,closeModal:o,updateModalContent:i}})(),[c,d]=(0,n.useState)(!1),h=()=>{let e=(0,r.MH)();(null==e?void 0:e.accessToken)?(i(e.userInfo),a(!0)):a(!1),t(!0)};return(0,n.useEffect)(()=>{e&&s&&(c||((0,r.Y3)(),d(!0)))},[e,s]),(0,n.useEffect)(()=>{h()},[]),{loaded:e,isAuthenticated:s,checkToken:h,logOut:()=>{(0,r.a1)(),i(null),a(!1)},logIn:(e,t)=>{(0,r.NC)(e,t),h()},userInfo:o,modal:l,isInitialized:c}};var o=s(8738);s(3588)},3588:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(5155),n=s(8738);let a=e=>{let{onClose:t}=e;return(0,r.jsx)("button",{className:"text-gray-400 hover:text-gray-600 absolute top-4 right-4 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded-full p-1 transition-colors","aria-label":"close",onClick:t,children:(0,r.jsxs)("svg",{width:20,height:20,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{d:"M18 6L6 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})},o=()=>{let{modal:e}=(0,n.i)(),{isOpen:t,modalContent:s,closeModal:o}=e;return t&&s?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:o}),(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-2xl ".concat((e=>{switch(e){case"sm":return"w-80 md:w-96";case"md":default:return"w-96 md:w-auto";case"lg":return"w-full max-w-2xl";case"xl":return"w-full max-w-4xl";case"full":return"w-full h-full max-w-none"}})(s.size)," max-h-[90vh] overflow-hidden"),children:[(0,r.jsx)(a,{onClose:o}),s.title&&(0,r.jsx)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:s.title})}),(0,r.jsx)("div",{className:"p-6",children:s.content}),!s.title&&(0,r.jsx)(a,{onClose:o})]})]}):null}},3786:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4678:(e,t,s)=>{"use strict";s.d(t,{$V:()=>n.$V,AC:()=>n.AC,B9:()=>n.B9,Cs:()=>n.Cs,De:()=>n.De,Ed:()=>n.Ed,H1:()=>n.H1,H4:()=>n.H4,K4:()=>n.K4,Kh:()=>n.Kh,Lv:()=>n.Lv,MA:()=>n.MA,MH:()=>r.MH,NC:()=>r.NC,Nv:()=>n.Nv,Om:()=>n.Om,P6:()=>n.P6,Pj:()=>n.Pj,QT:()=>n.QT,Qf:()=>n.Qf,Qk:()=>n.Qk,R5:()=>n.R5,Sx:()=>n.Sx,T:()=>n.T,TT:()=>n.TT,TY:()=>n.TY,Tv:()=>n.Tv,U8:()=>n.U8,VG:()=>n.VG,Y3:()=>n.Y3,ZN:()=>n.ZN,_Q:()=>n._Q,_m:()=>n._m,a1:()=>r.a1,cZ:()=>n.cZ,ct:()=>n.ct,e0:()=>n.e0,eK:()=>n.eK,fB:()=>n.fB,iY:()=>n.iY,lB:()=>n.lB,lo:()=>n.lo,q0:()=>n.q0,qf:()=>n.qf,rf:()=>n.rf,s2:()=>n.s2,tF:()=>n.tF,to:()=>n.to,u1:()=>n.u1,uP:()=>n.uP,yn:()=>n.yn,z6:()=>n.z6});var r=s(3999),n=s(1886)},5705:(e,t,s)=>{Promise.resolve().then(s.bind(s,232))},7924:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8738:(e,t,s)=>{"use strict";s.d(t,{H:()=>l,i:()=>i});var r=s(5155),n=s(2115),a=s(993);let o=(0,n.createContext)(null),i=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useGAppState must be used within an GAppStateContext");return e},l=e=>{let{children:t}=e,s=(0,a.bH)();return(0,r.jsx)(o.Provider,{value:s,children:t})}}},e=>{e.O(0,[3464,4212,95,1886,8441,5964,7358],()=>e(e.s=5705)),_N_E=e.O()}]);