(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4540],{1073:(e,a,t)=>{"use strict";function s(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;let s={};return e.option_fields.forEach(e=>{void 0!==a[e.key]?s[e.key]=a[e.key]:t&&void 0!==e.default&&(s[e.key]=e.default)}),Object.keys(s).length>0?s:void 0}t.d(a,{$:()=>s})},1539:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},1813:(e,a,t)=>{Promise.resolve().then(t.bind(t,5533))},2243:(e,a,t)=>{"use strict";t.d(a,{Q:()=>r});var s=t(5155);t(2115);let l=e=>{var a;let{field:t,value:l,onChange:r}=e,i=e=>{let a=e.target.value;"number"===t.type?a=parseFloat(a)||0:"boolean"===t.type&&(a=e.target.checked),r(a)};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t.name,t.required&&(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),t.description&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:t.description}),"textarea"===t.type?(0,s.jsx)("textarea",{value:l||"",onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:t.required,rows:3}):"select"===t.type?(0,s.jsx)("select",{value:l||t.default||"",onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:t.required,children:(null==(a=t.options)?void 0:a.map(e=>(0,s.jsx)("option",{value:e,children:e},e)))||[]}):"boolean"===t.type?(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:l||!1,onChange:i,className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Enabled"})]}):(0,s.jsx)("input",{type:"api_key"===t.type?"password":"number"===t.type?"number":"text",value:l||"",onChange:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:t.required,placeholder:t.default})]})},r=e=>{let{definition:a,formData:t,onFieldChange:r,className:i=""}=e;return a&&0!==a.option_fields.length?(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Configuration Options"}),(0,s.jsx)("div",{className:"space-y-3 border border-gray-200 rounded-lg p-4 ".concat(i),children:a.option_fields.map(e=>(0,s.jsx)(l,{field:e,value:void 0!==t[e.key]?t[e.key]:e.default,onChange:a=>r(e.key,a)},e.key))})]}):null}},2525:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2569:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(5155),l=t(7924),r=t(1539);let i=e=>(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 ".concat(e.className),children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:e.placeholder||"Search spaces...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.searchText,onChange:a=>e.setSearchText(a.target.value)}),(0,s.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",onClick:e.onSearchButtonClick,children:(0,s.jsx)(r.A,{className:"w-5 h-5 text-gray-400"})})]})})})},2706:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(5155);let l=e=>(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"h4",children:e.name}),(0,s.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},2780:(e,a,t)=>{"use strict";t.d(a,{A:()=>r,M:()=>l});var s=t(5155);let l=e=>(0,s.jsx)("button",{onClick:e.onClick,disabled:e.disabled,className:"btn btn-base preset-filled",children:e.name||"Add"}),r=l},3717:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4498:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]])},5533:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j});var s=t(5155),l=t(2115);let r=(0,t(9946).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var i=t(6932),n=t(7108),c=t(4498),d=t(3717),o=t(2525),p=t(5695),u=t(2706),x=t(2569),h=t(2780),m=t(993),y=t(4678),g=t(7071),b=t(2243),v=t(1073);function j(){let e=(0,p.useSearchParams)(),a=e.get("install_id"),t=e.get("space_id");return a?(0,s.jsx)(f,{installId:parseInt(a),spaceId:t?parseInt(t):void 0}):(0,s.jsx)("div",{children:"Install ID not provided"})}let f=e=>{var a,t;let{installId:n,spaceId:c}=e,[d,o]=(0,l.useState)(""),[b,v]=(0,l.useState)(""),[j,f]=(0,l.useState)("all"),[w,k]=(0,l.useState)(null),A=(0,p.useRouter)();(0,m.ii)();let S=(0,g.A)({loader:()=>{let e={};return"package"===j?e.space_id=0:"space"===j&&c?e.space_id=c:"space"===j&&void 0===c&&delete e.space_id,b&&(e.capability_type=b),(0,y.TY)(n,e.space_id,e.capability_type)},ready:!0,dependencies:[j,b,n,c]}),C=(0,g.A)({loader:()=>(0,y.Cs)(),ready:!0}),_=(null==(a=S.data)?void 0:a.filter(e=>""===d||e.name.toLowerCase().includes(d.toLowerCase())||e.capability_type.toLowerCase().includes(d.toLowerCase())))||[],M=Array.from(new Set((null==(t=S.data)?void 0:t.map(e=>e.capability_type))||[])),q=async(e,a)=>{try{await (0,y.Om)(n,e,a),S.reload(),k(null)}catch(e){var t,s;console.error("Failed to update capability:",e),alert("Failed to update capability: "+(null==e||null==(s=e.response)||null==(t=s.data)?void 0:t.error))}},L=async e=>{if(confirm("Are you sure you want to delete this capability?"))try{await (0,y.Qk)(n,e),S.reload()}catch(e){var a,t;console.error("Failed to delete capability:",e),alert("Failed to delete capability: "+(null==e||null==(t=e.response)||null==(a=t.data)?void 0:a.error))}};return(0,s.jsxs)(u.A,{Icon:r,name:"Space Capabilities",description:"Manage capabilities for this package or space",rightContent:(0,s.jsx)(h.M,{name:"+ Add Capability",onClick:()=>{let e=new URLSearchParams;e.set("install_id",n.toString()),c&&e.set("space_id",c.toString()),A.push("/portal/admin/spaces/tools/capabilities/create?".concat(e.toString()))}}),children:[(0,s.jsx)(x.A,{searchText:d,setSearchText:o}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8 w-full",children:[(0,s.jsxs)("div",{className:"mb-6 flex gap-4 items-center flex-wrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Filter:"})]}),(0,s.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),M.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:j,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"all",children:"All Scopes"}),(0,s.jsx)("option",{value:"package",children:"Package Level (root)"}),void 0!==c&&(0,s.jsx)("option",{value:"space",children:"This Space"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Scope"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Options"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.loading?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Loading..."})}):0===_.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"No capabilities found"})}):_.map(e=>(0,s.jsx)(N,{capability:e,onEdit:()=>k(e.id),onDelete:()=>L(e.id),onUpdate:a=>q(e.id,a),onCancelEdit:()=>k(null),isEditing:w===e.id,capabilityTypes:C.data||[]},e.id))})]})})})]})]})},N=e=>{let{capability:a,onEdit:t,onDelete:r,onUpdate:i,onCancelEdit:p,isEditing:u,capabilityTypes:x}=e,[h,m]=(0,l.useState)({name:a.name,capability_type:a.capability_type,space_id:a.space_id});if(u){let e=x.find(e=>e.name===a.capability_type);return(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-6 py-4",children:(0,s.jsx)(w,{capability:a,definition:e,capabilityTypes:x,onSave:e=>{i(e)},onCancel:p})})})}let y="";try{let e=JSON.parse(a.options||"{}");y=Object.keys(e).length>0?JSON.stringify(e,null,2).substring(0,100)+(JSON.stringify(e).length>100?"...":""):"{}"}catch(e){y=a.options||"{}"}return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:a.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.capability_type}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:0===a.space_id?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(n.A,{className:"w-4 h-4"}),"Package Level"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,s.jsx)(c.A,{className:"w-4 h-4"}),"Space #",a.space_id]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:(0,s.jsx)("div",{className:"max-w-xs truncate",title:y,children:y})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:t,className:"text-blue-600 hover:text-blue-900",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:r,className:"text-red-600 hover:text-red-900",children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})})]})},w=e=>{let{capability:a,definition:t,capabilityTypes:r,onSave:i,onCancel:n}=e,[c,d]=(0,l.useState)(a.name),[o,p]=(0,l.useState)(a.capability_type),[u,x]=(0,l.useState)(a.space_id),[h,m]=(0,l.useState)(()=>{try{return JSON.parse(a.options||"{}")}catch(e){return{}}}),y=r.find(e=>e.name===o);return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i({name:c,capability_type:o,space_id:u,options:(0,v.$)(y,h,!1)})},className:"space-y-4 bg-gray-50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,s.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,s.jsx)("select",{value:o,onChange:e=>{p(e.target.value),m({})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:r.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scope"}),(0,s.jsxs)("select",{value:u,onChange:e=>x(parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:0,children:"Package Level (root)"}),u>0&&(0,s.jsxs)("option",{value:u,children:["Space #",u]})]})]}),y&&(0,s.jsx)(b.Q,{definition:y,formData:h,onFieldChange:(e,a)=>m({...h,[e]:a}),className:"bg-white"}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Save"})]})]})}},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},6932:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},7071:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var s=t(2115);let l=e=>{let[a,t]=(0,s.useState)(null),[l,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)(null),c=async()=>{if(e.ready){r(!0),n(null);try{let a=await e.loader();t(a.data)}catch(e){n(e.message||"An error occurred")}finally{r(!1)}}};return(0,s.useEffect)(()=>{c()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:a,loading:l,error:i,reload:c}}},7108:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7924:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9946:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var s=t(2115);let l=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},r=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:p,...u}=e;return(0,s.createElement)("svg",{ref:a,...i,width:l,height:l,stroke:t,strokeWidth:c?24*Number(n)/Number(l):n,className:r("lucide",d),...!o&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(u)&&{"aria-hidden":"true"},...u},[...p.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(o)?o:[o]])}),c=(e,a)=>{let t=(0,s.forwardRef)((t,i)=>{let{className:c,...d}=t;return(0,s.createElement)(n,{ref:i,iconNode:a,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return t.displayName=l(e),t}}},e=>{e.O(0,[3464,8738,8441,5964,7358],()=>e(e.s=1813)),_N_E=e.O()}]);