(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6596],{1380:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},1539:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},1788:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2569:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),l=a(7924),r=a(1539);let i=e=>(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 ".concat(e.className),children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,s.jsx)("input",{type:"text",placeholder:e.placeholder||"Search spaces...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:e.searchText,onChange:t=>e.setSearchText(t.target.value)}),(0,s.jsx)("button",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 cursor-pointer hover:bg-gray-100 rounded-full transition-colors",onClick:e.onSearchButtonClick,children:(0,s.jsx)(r.A,{className:"w-5 h-5 text-gray-400"})})]})})})},2706:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(5155);let l=e=>(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 w-full",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)(e.Icon,{className:"w-5 h-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"h4",children:e.name}),(0,s.jsx)("p",{className:"p text-wrap",children:e.description})]})]})}),(0,s.jsx)("div",{className:"flex items-center gap-4",children:e.rightContent})]})}),e.children]})},3717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4653:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]])},5169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},5968:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},6871:(e,t,a)=>{Promise.resolve().then(a.bind(a,7175))},7071:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var s=a(2115);let l=e=>{let[t,a]=(0,s.useState)(null),[l,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)(null),c=async()=>{if(e.ready){r(!0),n(null);try{let t=await e.loader();a(t.data)}catch(e){n(e.message||"An error occurred")}finally{r(!1)}}};return(0,s.useEffect)(()=>{c()},[e.ready,...e.dependencies?e.dependencies:[]]),{data:t,loading:l,error:i,reload:c}}},7175:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(5155),l=a(2115),r=a(1380),i=a(9869),n=a(5968),c=a(4653),o=a(5169),d=a(9890),h=a(3717),u=a(1788),x=a(2525),m=a(5695),p=a(2706),g=a(4678),f=a(7071),b=a(993),y=a(2569);function j(){let e=(0,m.useRouter)(),t=(0,m.useSearchParams)().get("package_version_id");return((0,b.ii)(),t)?(0,s.jsx)(v,{packageId:parseInt(t)}):(0,s.jsx)(p.A,{Icon:r.A,name:"Package Files",description:"Select a package to view files",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(r.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No package selected"}),(0,s.jsx)("button",{onClick:()=>e.back(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Go Back"})]})})})}let v=e=>{let{packageId:t}=e,[a,d]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[x,m]=(0,l.useState)("list"),[j,v]=(0,l.useState)(!1),w=(0,l.useRef)(null),k=(0,b.ii)(),C=(0,f.A)({loader:()=>(0,g.MA)(t,a),ready:k.isInitialized,dependencies:[a,h]}),M=(C.data||[]).filter(e=>{let t=e.path===a,s=e.name.toLowerCase().includes(h.toLowerCase());return t&&s}),S=M.filter(e=>e.is_folder),E=M.filter(e=>!e.is_folder),P=a.split("/").filter(Boolean),_=async e=>{try{let a=await (0,g.Tv)(t,e.id),s=window.URL.createObjectURL(new Blob([a.data])),l=document.createElement("a");l.href=s,l.setAttribute("download",e.name),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(s)}catch(e){console.error("Download failed:",e)}},D=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await (0,g.e0)(t,e.id),C.reload()}catch(e){console.error("Delete failed:",e)}},z=async e=>{try{let l=await (0,g.Tv)(t,e.id);if(!(l.data instanceof Blob))throw Error("Expected blob response but got something else");let r=await l.data.text();k.modal.openModal({title:"Edit ".concat(e.name),content:(0,s.jsx)(A,{packageId:t,file:e,initialContent:r,currentPath:a,onSave:()=>{C.reload(),k.modal.closeModal()},onCancel:()=>k.modal.closeModal()}),size:"xl"})}catch(e){console.error("Failed to load file for editing:",e),alert("Failed to load file for editing. The file might be too large, not a text file, or corrupted.")}},L=async e=>{let s=e.target.files;if(s&&0!==s.length){v(!0);try{for(let e of Array.from(s))await (0,g.U8)(t,e,a);C.reload()}catch(e){console.error("Upload failed:",e)}finally{v(!1),w.current&&(w.current.value="")}}};return(0,s.jsx)(p.A,{Icon:r.A,name:"Package Files",description:"Managing files for package",rightContent:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{onClick:()=>{var e;return null==(e=w.current)?void 0:e.click()},disabled:j,className:"flex items-center gap-2 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:[(0,s.jsx)(i.A,{className:"w-4 h-4"}),j?"Uploading...":"Upload"]}),(0,s.jsx)("input",{ref:w,type:"file",multiple:!0,onChange:L,className:"hidden"})]}),children:(0,s.jsxs)("div",{className:"card m-4 p-4 flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-white",children:[(0,s.jsx)("div",{className:"flex w-full",children:(0,s.jsx)(y.A,{searchText:h,setSearchText:u,placeholder:"Search files...",onSearchButtonClick:()=>C.reload(),className:"w-full"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>m("list"),className:"p-2 rounded ".concat("list"===x?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,s.jsx)(n.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>m("grid"),className:"p-2 rounded ".concat("grid"===x?"bg-blue-100 text-blue-600":"text-gray-400"),children:(0,s.jsx)(c.A,{className:"w-4 h-4"})})]})]}),(0,s.jsxs)("nav",{className:"flex items-center space-x-2 text-sm rounded-lg bg-white p-4 border border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>d(""),className:"text-blue-500 hover:text-blue-700",children:"Root"}),P.map((e,t)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"/"}),(0,s.jsx)("button",{onClick:()=>{d(P.slice(0,t+1).join("/"))},className:"text-blue-500 hover:text-blue-700",children:e})]},t))]}),a&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("button",{onClick:()=>{let e=a.split("/");e.pop(),d(e.join("/"))},className:"flex items-center gap-2 text-blue-500 hover:text-blue-700",children:[(0,s.jsx)(o.A,{className:"w-4 h-4"}),"Back"]})}),C.loading?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading files..."})]})}):0===M.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(r.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No files found"})]})}):(0,s.jsxs)("div",{className:"grid"===x?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4":"space-y-2",children:[S.map(e=>(0,s.jsx)(N,{file:e,viewMode:x,onDoubleClick:()=>(e=>{d(a?"".concat(a,"/").concat(e.name):e.name)})(e),onDownload:()=>{},onEdit:()=>{},onDelete:()=>D(e)},e.id)),E.map(e=>(0,s.jsx)(N,{file:e,viewMode:x,onDoubleClick:()=>_(e),onDownload:()=>_(e),onEdit:()=>z(e),onDelete:()=>D(e)},e.id))]})]})})},N=e=>{let{file:t,viewMode:a,onDoubleClick:i,onDownload:n,onEdit:c,onDelete:o}=e,[m,p]=(0,l.useState)(!1);return"grid"===a?(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer group relative",onDoubleClick:i,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:t.is_folder?(0,s.jsx)(r.A,{className:"w-8 h-8 text-blue-500"}):(0,s.jsx)(d.A,{className:"w-8 h-8 text-gray-500"})}),(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate w-full",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:t.is_folder?"Folder":w(t.size)})]}),m&&!t.is_folder&&(0,s.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Edit file",children:(0,s.jsx)(h.A,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100",title:"Download file",children:(0,s.jsx)(u.A,{className:"w-3 h-3"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-1 bg-white rounded shadow-sm hover:bg-gray-100 text-red-500",title:"Delete file",children:(0,s.jsx)(x.A,{className:"w-3 h-3"})})]})]}):(0,s.jsxs)("div",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer group",onDoubleClick:i,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[(0,s.jsx)("div",{className:"flex-shrink-0 mr-3",children:t.is_folder?(0,s.jsx)(r.A,{className:"w-5 h-5 text-blue-500"}):(0,s.jsx)(d.A,{className:"w-5 h-5 text-gray-500"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-900 truncate",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:t.is_folder?"Folder":"".concat(w(t.size)," â€¢ ").concat(k(t.created_at))})]}),m&&!t.is_folder&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),c()},className:"p-1 hover:bg-gray-200 rounded",title:"Edit file",children:(0,s.jsx)(h.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},className:"p-1 hover:bg-gray-200 rounded",title:"Download file",children:(0,s.jsx)(u.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:"p-1 hover:bg-gray-200 rounded text-red-500",title:"Delete file",children:(0,s.jsx)(x.A,{className:"w-4 h-4"})})]})]})},w=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]},k=e=>new Date(e).toLocaleDateString(),A=e=>{let{packageId:t,file:a,initialContent:r,currentPath:i,onSave:n,onCancel:c}=e,[o,d]=(0,l.useState)(r),[h,u]=(0,l.useState)(!1),x=(0,l.useRef)(null);(0,l.useEffect)(()=>{x.current&&x.current.focus()},[]);let m=async()=>{u(!0);try{await (0,g.B9)(t,a.id,o,a.name,i),n()}catch(e){console.error("Failed to save file:",e),alert("Failed to save file. Please try again.")}finally{u(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-full max-h-[80vh]",children:[(0,s.jsx)("div",{className:"flex-1 mb-4",children:(0,s.jsx)("textarea",{ref:x,value:o,onChange:e=>d(e.target.value),className:"w-full h-full p-4 border border-gray-300 rounded-lg font-mono text-sm resize-none focus:outline-none focus:ring-2 focus:ring-blue-500",style:{minHeight:"400px"},spellCheck:!1})}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:[o.length," characters"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:c,disabled:h,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 disabled:opacity-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:m,disabled:h||o===r,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Saving...":"Save"})]})]})]})}},7924:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},9869:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9890:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(2115);let l=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:h,...u}=e;return(0,s.createElement)("svg",{ref:t,...i,width:l,height:l,stroke:a,strokeWidth:c?24*Number(n)/Number(l):n,className:r("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,i)=>{let{className:c,...o}=a;return(0,s.createElement)(n,{ref:i,iconNode:t,className:r("lucide-".concat(l(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return a.displayName=l(e),a}}},e=>{e.O(0,[3464,8738,8441,5964,7358],()=>e(e.s=6871)),_N_E=e.O()}]);