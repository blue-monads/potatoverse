(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5343],{646:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4357:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},4678:(e,t,s)=>{"use strict";s.d(t,{$V:()=>a.$V,AC:()=>a.AC,B9:()=>a.B9,Cs:()=>a.Cs,De:()=>a.De,Ed:()=>a.Ed,H1:()=>a.H1,H4:()=>a.H4,K4:()=>a.K4,Kh:()=>a.Kh,Lv:()=>a.Lv,MA:()=>a.MA,MH:()=>r.MH,NC:()=>r.NC,Nv:()=>a.Nv,Om:()=>a.Om,P6:()=>a.P6,Pj:()=>a.Pj,QT:()=>a.QT,Qf:()=>a.Qf,Qk:()=>a.Qk,R5:()=>a.R5,Sx:()=>a.Sx,T:()=>a.T,TT:()=>a.TT,TY:()=>a.TY,Tv:()=>a.Tv,U8:()=>a.U8,VG:()=>a.VG,Y3:()=>a.Y3,ZN:()=>a.ZN,_Q:()=>a._Q,_m:()=>a._m,a1:()=>r.a1,cZ:()=>a.cZ,ct:()=>a.ct,e0:()=>a.e0,eK:()=>a.eK,fB:()=>a.fB,iY:()=>a.iY,lB:()=>a.lB,lo:()=>a.lo,q0:()=>a.q0,qf:()=>a.qf,rf:()=>a.rf,s2:()=>a.s2,tF:()=>a.tF,to:()=>a.to,u1:()=>a.u1,uP:()=>a.uP,yn:()=>a.yn,z6:()=>a.z6});var r=s(3999),a=s(1886)},4861:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5510:(e,t,s)=>{Promise.resolve().then(s.bind(s,7226))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7226:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(5155),a=s(2115),l=s(9869);let i=(0,s(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var n=s(4357),c=s(9890),d=s(4861),o=s(646),u=s(5695),m=s(4678);function h(){let e=(0,u.useSearchParams)(),[t,s]=(0,a.useState)(""),[h,x]=(0,a.useState)(null),[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[b,j]=(0,a.useState)("");(0,a.useEffect)(()=>{let t=e.get("presigned-key");t&&s(t)},[e]);let v=async()=>{if(!t.trim())return void j("Please enter a presigned key");if(!h)return void j("Please select a file to upload");p(!0),j(""),y(null);try{let e=await (0,m.QT)(t,h);y({success:!0,message:e.data.message||"File uploaded successfully!",fileId:e.data.file_id}),x(null);let s=document.getElementById("file-input");s&&(s.value="")}catch(t){var e,s;console.error("Upload error:",t),y({success:!1,message:(null==(s=t.response)||null==(e=s.data)?void 0:e.error)||t.message||"Upload failed. Please check your token and try again."})}finally{p(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4",children:(0,r.jsx)(l.A,{className:"w-8 h-8 text-blue-600"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Presigned File Upload"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Upload files using a presigned token - no authentication required"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)(i,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,r.jsx)("p",{className:"font-semibold mb-1",children:"How it works:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-800",children:[(0,r.jsx)("li",{children:"Paste your presigned token below"}),(0,r.jsx)("li",{children:"Select the file to upload (must match the token's filename)"}),(0,r.jsx)("li",{children:'Click "Upload File"'})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presigned Token"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),placeholder:"Paste your presigned token here...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm resize-none"}),t&&(0,r.jsx)("button",{onClick:()=>{let e=window.location.origin+window.location.pathname+(t?"?presigned-key=".concat(t):"");navigator.clipboard.writeText(e)},className:"absolute top-2 right-2 p-2 text-gray-400 hover:text-gray-600 bg-white rounded",title:"Copy shareable URL",children:(0,r.jsx)(n.A,{className:"w-4 h-4"})})]}),t&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Token detected (",t.length," characters)"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-400 transition-colors",children:[h?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(c.A,{className:"w-12 h-12 text-blue-500 mx-auto"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:h.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(h.size/1024/1024).toFixed(2)," MB"]})]}),(0,r.jsx)("button",{onClick:()=>{x(null);let e=document.getElementById("file-input");e&&(e.value="")},className:"text-sm text-red-600 hover:text-red-800",children:"Remove file"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)(l.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:"Click to select a file"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"File must match the token's expected filename"})]}),(0,r.jsx)("input",{id:"file-input",type:"file",onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];s&&(x(s),j(""),y(null))},className:"hidden"}),!h&&(0,r.jsx)("button",{onClick:()=>{var e;return null==(e=document.getElementById("file-input"))?void 0:e.click()},className:"mt-4 px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Choose File"})]})]}),b&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[(0,r.jsx)(d.A,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,r.jsx)("p",{className:"text-sm text-red-800",children:b})]}),f&&(0,r.jsxs)("div",{className:"border rounded-lg p-4 flex items-start gap-3 ".concat(f.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[f.success?(0,r.jsx)(o.A,{className:"w-5 h-5 text-green-600 flex-shrink-0"}):(0,r.jsx)(d.A,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium ".concat(f.success?"text-green-900":"text-red-900"),children:f.message}),f.success&&f.fileId&&(0,r.jsxs)("p",{className:"text-xs text-green-700 mt-1",children:["File ID: ",f.fileId]})]})]}),(0,r.jsx)("button",{onClick:v,disabled:g||!t.trim()||!h,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-colors flex items-center justify-center gap-2",children:g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{className:"w-5 h-5"}),"Upload File"]})})]}),(0,r.jsxs)("div",{className:"mt-8 bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"Need Help?"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Where do I get a presigned token?"}),(0,r.jsx)("br",{}),"Tokens are generated by space owners in the file management interface. Ask your administrator for a token."]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Can I share this page?"}),(0,r.jsx)("br",{}),"Yes! Once you paste a token, click the copy icon to get a shareable URL with the token included."]})]})]})]})})})}},9869:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},9890:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]])},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var r=s(2115);let a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,r.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:c?24*Number(n)/Number(a):n,className:l("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{className:c,...d}=s;return(0,r.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return s.displayName=a(e),s}}},e=>{e.O(0,[3464,1886,8441,5964,7358],()=>e(e.s=5510)),_N_E=e.O()}]);